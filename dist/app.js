!function(e){"use strict";function t(){}var i=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;t.extend=function(e){var n=this.prototype,s=Object.create(n);for(var o in e)s[o]="function"==typeof e[o]&&"function"==typeof n[o]&&i.test(e[o])?function(e,t){return function(){var i=this._super;this._super=n[e];var s=t.apply(this,arguments);return this._super=i,s}}(o,e[o]):e[o];var a="function"==typeof s.init?s.hasOwnProperty("init")?s.init:function(){n.init.apply(this,arguments)}:function(){};return a.prototype=s,s.constructor=a,a.extend=t.extend,a},e.Class=t}(this);var BaseController=Class.extend({scope:null,init:function(e){this.$scope=e,this.defineListeners(),this.defineScope()},defineListeners:function(){this.$scope.$on("$destroy",this.destroy.bind(this))},defineScope:function(){},destroy:function(e){}});BaseController.$inject=["$scope"];var BaseDirective=Class.extend({scope:null,init:function(e){this.$scope=e,this.defineListeners(),this.defineScope()},defineListeners:function(){this.$scope.$on("$destroy",this.destroy.bind(this))},defineScope:function(){},destroy:function(e){}});BaseDirective.$inject=["$scope"];var EventDispatcher=Class.extend({_listeners:{},addEventListener:function(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)},removeEventListener:function(e,t){if(this._listeners[e]){var i=this._listeners[e].indexOf(t);-1!==i&&this._listeners[e].splice(i,1)}},dispatchEvent:function(){var e;if("string"!=typeof arguments[0])console.warn("EventDispatcher","First params must be an event type (String)");else{e=this._listeners[arguments[0]];for(var t in e)e[t](arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6])}}});window.namespace=function(e){"use strict";var t=e.split("."),i=window,n=null,s=null;for(s in t)n=t[s],void 0===i[n]&&(i[n]={}),i=i[n];return i},function(){"use strict";var e=Class.extend({instance:new EventDispatcher,$get:[function(){return this.instance.notify=this.instance.dispatchEvent,this.instance}]});angular.module("notifications",[]).provider("Notifications",e)}(),angular.module("sbp",["notifications","navbar","GymModel","WallModel","wallList","wallListItem","RouteModel","routeList","routeListItem","UserModel","ParseService","ui.router","ngCookies","ngAnimate"]),angular.module("sbp").config(["$stateProvider","$urlRouterProvider",function(e,t){var i=function(e){return e.getDefaultGym()};i.$inject=["GymModel"],t.otherwise("/gym/map"),e.state("gymMap",{url:"/gym/map",templateUrl:"partials/gym/map/map.html",controller:GymMapController,resolve:{initGym:i}}).state("walls",{url:"/walls",templateUrl:"partials/walls/wallsPage.html",resolve:{initGym:i}}).state("wall",{url:"/walls/:id",templateUrl:"partials/walls/wallPage.html",controller:WallController,resolve:{initGym:i}}).state("routes",{url:"/routes",templateUrl:"partials/routes/routes.html",resolve:{initGym:i}}).state("userSettings",{url:"/users/:id/settings",templateUrl:"partials/settingsPage.html",resolve:{initGym:i}})}]),namespace("models.events").GYM_LOADED="ActivityModel.GYM_LOADED",namespace("models.events").GYMS_LOADED="ActivityModel.GYMS_LOADED";var GymModel=EventDispatcher.extend({gym:{},gyms:[],notifications:null,parseService:null,getDefaultGym:function(){return this.parseService.getDefaultGym(function(e){this.gym=e}.bind(this))},getGymById:function(e){},getGyms:function(e){}});!function(){var e=Class.extend({instance:new GymModel,$get:["Notifications","ParseService",function(e,t){return this.instance.notifications=e,this.instance.parseService=t,this.instance}]});angular.module("GymModel",[]).provider("GymModel",e)}(),namespace("models.events").ROUTE_LOADED="ActivityModel.ROUTE_LOADED";var RouteModel=EventDispatcher.extend({route:{},routes:[],notifications:null,gameService:null,getRouteById:function(e){this.GameService.getGameById(e)},getRoutesByWall:function(e){},createRoute:function(e){},saveRoute:function(e){},saveRoutes:function(e){}});!function(){var e=Class.extend({instance:new RouteModel,$get:["Notifications","ParseService",function(e,t){return this.instance.notifications=e,this.instance.parseService=t,this.instance}]});angular.module("RouteModel",[]).provider("RouteModel",e)}(),namespace("models.events").USER_SIGNED_IN="ActivityModel.USER_SIGNED_IN",namespace("models.events").USER_SIGNED_OUT="ActivityModel.USER_SIGNED_OUT",namespace("models.events").USER_UPDATED="ActivityModel.USER_UPDATED",namespace("models.events").PROFILE_LOADED="ActivityModel.PROFILE_LOADED",namespace("models.events").AUTH_ERROR="ActivityModel.AUTH_ERROR",namespace("models.events").NETWORK_ERROR="ActivityModel.NETWORK_ERROR";var UserModel=EventDispatcher.extend({currentUser:null,ParseService:null,notifications:null,signIn:function(e,t){},signOut:function(){},updateUser:function(e){}});!function(){var e=Class.extend({instance:new UserModel,$get:["ParseService","Notifications",function(e,t){return this.instance.ParseService=e,this.instance.notifications=t,this.instance}]});angular.module("UserModel",[]).provider("UserModel",e)}(),namespace("models.events").WALL_LOADED="ActivityModel.WALL_LOADED",namespace("models.events").WALLS_LOADED="ActivityModel.WALLS_LOADED";var WallModel=EventDispatcher.extend({wall:{},walls:[],notifications:null,parseService:null,getWallById:function(e){return this.parseService.getWallById(e,function(e){this.wall=e,this.notifications.notify(models.events.WALL_LOADED)}.bind(this))},getWallsByGym:function(e){return this.parseService.getWallsByGym(e,function(e){this.walls=e,this.notifications.notify(models.events.WALLS_LOADED)}.bind(this))},createWall:function(e){},saveWall:function(e){},deleteWall:function(e){}});!function(){var e=Class.extend({instance:new WallModel,$get:["Notifications","ParseService",function(e,t){return this.instance.notifications=e,this.instance.parseService=t,this.instance}]});angular.module("WallModel",[]).provider("WallModel",e)}(),function(e){e.fn.rwdImageMaps=function(){var t=this,i=function(){t.each(function(){if("undefined"!=typeof e(this).attr("usemap")){var t=this,i=e(t);e("<img />").load(function(){var t="width",n="height",s=i.attr(t),o=i.attr(n);if(!s||!o){var a=new Image;a.src=i.attr("src"),s||(s=a.width),o||(o=a.height)}var r=i.width()/100,l=i.height()/100,c=i.attr("usemap").replace("#",""),u="coords";e('map[name="'+c+'"]').find("area").each(function(){var t=e(this);t.data(u)||t.data(u,t.attr(u));for(var i=t.data(u).split(","),n=new Array(i.length),a=0;a<n.length;++a)n[a]=parseInt(a%2===0?i[a]/s*100*r:i[a]/o*100*l);t.attr(u,n.toString())})}).attr("src",i.attr("src"))}})};return e(window).resize(i).trigger("resize"),this}}(jQuery);var ParseService=Class.extend({Gym:Parse.Object.extend("Gym"),Wall:Parse.Object.extend("Wall"),Route:Parse.Object.extend("Route"),Hold:Parse.Object.extend("Hold"),signIn:function(e,t){},signOut:function(){},updateUser:function(e){},getDefaultGym:function(e){var t=new Parse.Query(this.Gym);return t.get("4WChpaHxDE",{success:function(t){e(t)},error:function(t){e(t)}})},getWallsByGym:function(e,t){var i=new Parse.Query(this.Wall);i.equalTo("gym",e),i.find({success:function(e){t(e)},error:function(e){t(e)}})},getWallById:function(e,t){var i=new Parse.Query(this.Wall);return i.get(e,{success:function(e){t(e)},error:function(e){t(e)}})}});!function(){var e=Class.extend({instance:new ParseService,$get:function(){return Parse.initialize("NKnM9iqa0hnqZhA1M2TdyDYMMMVpW24QNcqaSZ2Y","k7cekvXmYutKXkuSuOp2scFgbkRnAUdQMh4SewsG"),this.instance}});angular.module("ParseService",[]).provider("ParseService",e)}(),namespace("models.events").BRAND_CHANGE="ActivityModel.BRAND_CHANGE";var NavBarDirective=BaseDirective.extend({userModel:null,notifications:null,init:function(e,t,i){this.userModel=t,this.notifications=i,this._super(e)},defineListeners:function(){this.notifications.addEventListener(models.events.USER_SIGNED_IN,this.handleUserSignedIn.bind(this)),this.notifications.addEventListener(models.events.BRAND_CHANGE,this.handleBrandChange.bind(this)),this.$scope.logout=this.logout.bind(this)},defineScope:function(){this.navShowing=!1,this.$scope.brand="SBP",this.$scope.currentUser=this.userModel.currentUser,$(".button-collapse").sideNav()},logout:function(){this.userModel.logout(),this.$location.url("/")},handleUserSignedIn:function(){this.$scope.currentUser=this.userModel.currentUser},handleBrandChange:function(e,t){this.$scope.brand=t}});angular.module("navbar",[]).directive("navbar",["UserModel","Notifications",function(e,t){return{restrict:"E",isolate:!0,link:function(i){new NavBarDirective(i,e,t)},scope:!0,templateUrl:"partials/navbar/navbar.html"}}]);var WallController=BaseController.extend({notifications:null,init:function(e,t,i,n,s,o){this.$state=t,this.gymModel=n,this.wallModel=s,this.userModel=o,this.notifications=i,this._super(e),$(document).ready(function(){$("ul.tabs").tabs()}),this.wallModel.getWallById(this.$state.params.id)},defineListeners:function(){this._super()},defineScope:function(){this.notifications.addEventListener(models.events.WALL_LOADED,this.handleWallLoaded.bind(this))},destroy:function(){},handleWallLoaded:function(){this.$scope.wall=this.wallModel.wall,this.notifications.notify(models.events.BRAND_CHANGE,this.$scope.wall.get("name"))}});WallController.$inject=["$scope","$state","Notifications","GymModel","WallModel","UserModel"];var WallListDirective=BaseDirective.extend({userModel:null,notifications:null,init:function(e,t,i,n,s){this.wallModel=t,this.gymModel=i,this.userModel=n,this.notifications=s,this._super(e),this.getWalls()},defineListeners:function(){this.notifications.addEventListener(models.events.USER_SIGNED_IN,this.handleUserChange.bind(this)),this.notifications.addEventListener(models.events.USER_SIGNED_OUT,this.handleUserChange.bind(this)),this.notifications.addEventListener(models.events.WALLS_LOADED,this.handleWallsChange.bind(this))},defineScope:function(){this.$scope.walls=[]},getWalls:function(){this.wallModel.getWallsByGym(this.gymModel.gym)},handleUserChange:function(){this.$scope.currentUser=this.userModel.currentUser},handleWallsChange:function(){this.$scope.walls=this.wallModel.walls,console.log(this.$scope.walls)}});angular.module("wallList",[]).directive("wallList",["WallModel","GymModel","UserModel","Notifications",function(e,t,i,n){return{restrict:"E",isolate:!0,link:function(s){new WallListDirective(s,e,t,i,n)},scope:!0,templateUrl:"partials/walls/wallList.html"}}]);var WallListItemDirective=BaseDirective.extend({userModel:null,notifications:null,init:function(e,t,i,n,s){this.wallModel=t,this.gymModel=i,this.userModel=n,this.notifications=s,this._super(e)},defineListeners:function(){this.notifications.addEventListener(models.events.USER_SIGNED_IN,this.handleUserChange.bind(this)),this.notifications.addEventListener(models.events.USER_SIGNED_OUT,this.handleUserChange.bind(this)),this.notifications.addEventListener(models.events.WALLS_LOADED,this.handleWallsChange.bind(this))},defineScope:function(){this.$scope.walls=[]},getWalls:function(){this.wallModel.getWallsByGym(this.gymModel.gym)},handleUserChange:function(){this.$scope.currentUser=this.userModel.currentUser},handleWallsChange:function(){this.$scope.walls=this.wallModel.walls,console.log(this.$scope.walls)}});angular.module("wallListItem",[]).directive("wallListItem",["WallModel","GymModel","UserModel","Notifications",function(e,t,i,n){return{restrict:"E",isolate:!0,link:function(s){new WallListItemDirective(s,e,t,i,n)},scope:!1,templateUrl:"partials/walls/wallListItem.html"}}]);var GymMapController=BaseController.extend({notifications:null,rootCanvas:null,rootImage:null,init:function(e,t){this.notifications=t,this._super(e)},defineListeners:function(){this._super(),this.$scope.areaClicked=this.areaClicked.bind(this),window.onresize=this.onResize.bind(this)},defineScope:function(){var e=this;$(document).ready(function(t){e.rootImage=$(".imageLayer img").on("load.omgmaps",function(t){$(this).rwdImageMaps(),e.highlightMap()}).css("opacity","0"),console.log("done")})},destroy:function(){$("area").off(".omgmaps"),$("img").off(".omgmaps")},areaClicked:function(){console.log("RCH")},createRootCanvas:function(){var e=this.rootImage,t=e.width(),i=e.height();this.rootCanvas=$("<canvas>").attr("width",t).attr("height",i),this.rootCanvas.css({position:"absolute",top:"0px",left:"0px",height:"auto"}),e.before(this.rootCanvas);var n=this.rootCanvas.get(0).getContext("2d");n.drawImage(e.get(0),0,0,t,i)},redrawRootCanvas:function(){var e=this.rootImage,t=e.width(),i=e.height(),n=this.rootCanvas.get(0).getContext("2d");n.clearRect(0,0,this.rootCanvas.get(0).width,this.rootCanvas.get(0).width),this.rootCanvas.attr("width",t).attr("height",i),n.drawImage(e.get(0),0,0,e.width(),e.height())},highlightMap:function(){{var e=($("body"),$(".mapContent")),t=$("#gymMap"),i=($("#gymMap").get(0),t.find("area")),n=this.rootImage,s=n.width(),o=n.height(),a=n.attr("width"),r=n.attr("height"),l=parseFloat(s/a),c=parseFloat(o/r);this.createRootCanvas()}$.each(i,function(t,i){var i=$(i),n=i.get(0),a=n.coords.split(", ");a=a.map(function(e,t){return t%2===0?e*l:e*c});var r=$("<canvas>").attr("width",s).attr("height",o).addClass("map-overlay");r.css({position:"absolute",top:"0px",left:"0px",opacity:"0.0",display:"none"}),e.find("img").before(r);var u=r.get(0).getContext("2d");u.fillStyle="#f00";var d=a[0],h=a[1];u.beginPath(),u.moveTo(d,h);for(var f=2,v=a.length;v-1>f;f+=2)d=a[f],h=a[f+1],u.lineTo(d,h);u.closePath(),u.fill(),i.on("mouseenter.omgmaps",function(e){return function(t){t.preventDefault(),e.css("display","block"),e.animate({opacity:"1.0"},200,"linear")}}(r)),i.on("mouseleave.omgmaps",function(e){return function(t){t.preventDefault(),e.animate({opacity:"0.0"},200,"linear",function(){e.css("display","none")})}}(r)),i.on("click.omgmaps",function(e){return function(e){e.preventDefault(),console.log("click")}}(r))})},onResize:function(){var e=this;this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){e.resize()},200)},resize:function(){var e=this;console.log("resize"),this.rootCanvas&&this.redrawRootCanvas(),$("canvas.map-overlay").each(function(t,i){i=$(i),i.css({height:e.rootImage.height(),width:e.rootImage.width()})})}});GymMapController.$inject=["$scope","Notifications"];var RouteListDirective=BaseDirective.extend({userModel:null,notifications:null,init:function(e,t,i){this.userModel=t,this.notifications=i,this._super(e)},defineListeners:function(){this.notifications.addEventListener(models.events.USER_SIGNED_IN,this.handleUserSignedIn.bind(this)),this.$scope.logout=this.logout.bind(this)},defineScope:function(){console.log("routeListDirective"),this.$scope.routes=[];var e={grade:5,color:"blue"};this.$scope.routes.push(e),e={grade:6,color:"orange"},this.$scope.routes.push(e),e={grade:7,color:"purple"},this.$scope.routes.push(e),console.log(this.$scope.routes)},logout:function(){this.userModel.logout(),this.$location.url("/")},handleUserSignedIn:function(){this.$scope.currentUser=this.userModel.currentUser}});angular.module("routeList",[]).directive("routeList",["UserModel","Notifications",function(e,t){return{restrict:"E",isolate:!0,link:function(i){new RouteListDirective(i,e,t)},scope:!0,templateUrl:"partials/routes/routeList.html"}}]);var RouteListItemDirective=BaseDirective.extend({userModel:null,notifications:null,init:function(e,t,i){this.userModel=t,this.notifications=i,this._super(e)},defineListeners:function(){this.notifications.addEventListener(models.events.USER_SIGNED_IN,this.handleUserSignedIn.bind(this)),this.$scope.logout=this.logout.bind(this)},defineScope:function(){this.navShowing=!1,this.$scope.currentUser=this.userModel.currentUser},logout:function(){this.userModel.logout(),this.$location.url("/")},handleUserSignedIn:function(){this.$scope.currentUser=this.userModel.currentUser}});angular.module("routeListItem",[]).directive("routeListItem",["UserModel","Notifications",function(e,t){return{restrict:"E",isolate:!0,link:function(i){new RouteListItemDirective(i,e,t)},scope:!0,templateUrl:"partials/routes/routeListItem.html"}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNsYXNzLmpzIiwiQmFzZUNvbnRyb2xsZXIuanMiLCJCYXNlRGlyZWN0aXZlLmpzIiwiRXZlbnREaXNwYXRjaGVyLmpzIiwiTmFtZXNwYWNlLmpzIiwiTm90aWZpY2F0aW9ucy5qcyIsImFwcC5qcyIsImNvbmZpZy5qcyIsIm1vZGVscy9neW1Nb2RlbC5qcyIsIm1vZGVscy9yb3V0ZU1vZGVsLmpzIiwibW9kZWxzL3VzZXJNb2RlbC5qcyIsIm1vZGVscy93YWxsTW9kZWwuanMiLCJzZXJ2aWNlcy9pbWFnZU1hcC5taW4uanMiLCJzZXJ2aWNlcy9wYXJzZVNlcnZpY2UuanMiLCJjb21wb25lbnRzL25hdmJhci9uYXZiYXJEaXJlY3RpdmUuanMiLCJjb21wb25lbnRzL3dhbGxzL3dhbGxDb250cm9sbGVyLmpzIiwiY29tcG9uZW50cy93YWxscy93YWxsTGlzdERpcmVjdGl2ZS5qcyIsImNvbXBvbmVudHMvd2FsbHMvd2FsbExpc3RJdGVtRGlyZWN0aXZlLmpzIiwiY29tcG9uZW50cy9neW0vbWFwL2d5bU1hcENvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL3JvdXRlcy9yb3V0ZUxpc3Qvcm91dGVMaXN0RGlyZWN0aXZlLmpzIiwiY29tcG9uZW50cy9yb3V0ZXMvcm91dGVMaXN0L3JvdXRlTGlzdEl0ZW1EaXJlY3RpdmUuanMiXSwibmFtZXMiOlsiZ2xvYmFsIiwiQmFzZUNsYXNzIiwiZm5UZXN0IiwidGVzdCIsInh5eiIsImV4dGVuZCIsInByb3BzIiwiX3N1cGVyIiwidGhpcyIsInByb3RvdHlwZSIsInByb3RvIiwiT2JqZWN0IiwiY3JlYXRlIiwibmFtZSIsImZuIiwidG1wIiwicmV0IiwiYXBwbHkiLCJhcmd1bWVudHMiLCJuZXdDbGFzcyIsImluaXQiLCJoYXNPd25Qcm9wZXJ0eSIsImNvbnN0cnVjdG9yIiwiQ2xhc3MiLCJCYXNlQ29udHJvbGxlciIsInNjb3BlIiwiJHNjb3BlIiwiZGVmaW5lTGlzdGVuZXJzIiwiZGVmaW5lU2NvcGUiLCIkb24iLCJkZXN0cm95IiwiYmluZCIsImV2ZW50IiwiJGluamVjdCIsIkJhc2VEaXJlY3RpdmUiLCJFdmVudERpc3BhdGNoZXIiLCJfbGlzdGVuZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsInR5cGUiLCJsaXN0ZW5lciIsInB1c2giLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiZGlzcGF0Y2hFdmVudCIsImxpc3RlbmVycyIsImNvbnNvbGUiLCJ3YXJuIiwia2V5Iiwid2luZG93IiwibmFtZXNwYWNlIiwibmFtZXNwYWNlcyIsIm5hbWVzIiwic3BsaXQiLCJsYXN0IiwiaSIsInVuZGVmaW5lZCIsIk5vdGlmaWNhdGlvbnNQcm92aWRlciIsImluc3RhbmNlIiwiJGdldCIsIm5vdGlmeSIsImFuZ3VsYXIiLCJtb2R1bGUiLCJwcm92aWRlciIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiaW5pdEd5bSIsIkd5bU1vZGVsIiwiZ2V0RGVmYXVsdEd5bSIsIm90aGVyd2lzZSIsInN0YXRlIiwidXJsIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiR3ltTWFwQ29udHJvbGxlciIsInJlc29sdmUiLCJXYWxsQ29udHJvbGxlciIsIkdZTV9MT0FERUQiLCJHWU1TX0xPQURFRCIsImd5bSIsImd5bXMiLCJub3RpZmljYXRpb25zIiwicGFyc2VTZXJ2aWNlIiwiZ2V0R3ltQnlJZCIsImlkIiwiZ2V0R3ltcyIsIkd5bU1vZGVsUHJvdmlkZXIiLCJOb3RpZmljYXRpb25zIiwiUGFyc2VTZXJ2aWNlIiwiUk9VVEVfTE9BREVEIiwiUm91dGVNb2RlbCIsInJvdXRlIiwicm91dGVzIiwiZ2FtZVNlcnZpY2UiLCJnZXRSb3V0ZUJ5SWQiLCJHYW1lU2VydmljZSIsImdldEdhbWVCeUlkIiwiZ2V0Um91dGVzQnlXYWxsIiwid2FsbCIsImNyZWF0ZVJvdXRlIiwic2F2ZVJvdXRlIiwic2F2ZVJvdXRlcyIsIlJvdXRlTW9kZWxQcm92aWRlciIsIlVTRVJfU0lHTkVEX0lOIiwiVVNFUl9TSUdORURfT1VUIiwiVVNFUl9VUERBVEVEIiwiUFJPRklMRV9MT0FERUQiLCJBVVRIX0VSUk9SIiwiTkVUV09SS19FUlJPUiIsIlVzZXJNb2RlbCIsImN1cnJlbnRVc2VyIiwic2lnbkluIiwiZW1haWwiLCJwYXNzd29yZCIsInNpZ25PdXQiLCJ1cGRhdGVVc2VyIiwidXNlciIsIlVzZXJNb2RlbFByb3ZpZGVyIiwiV0FMTF9MT0FERUQiLCJXQUxMU19MT0FERUQiLCJXYWxsTW9kZWwiLCJ3YWxscyIsImdldFdhbGxCeUlkIiwicmVzdWx0cyIsIm1vZGVscyIsImV2ZW50cyIsImdldFdhbGxzQnlHeW0iLCJjcmVhdGVXYWxsIiwic2F2ZVdhbGwiLCJkZWxldGVXYWxsIiwiV2FsbE1vZGVsUHJvdmlkZXIiLCJhIiwicndkSW1hZ2VNYXBzIiwiYyIsImIiLCJlYWNoIiwiYXR0ciIsImUiLCJkIiwibG9hZCIsImciLCJtIiwibiIsImoiLCJvIiwiSW1hZ2UiLCJzcmMiLCJ3aWR0aCIsImhlaWdodCIsImYiLCJrIiwicmVwbGFjZSIsImwiLCJmaW5kIiwiciIsImRhdGEiLCJxIiwicCIsIkFycmF5IiwibGVuZ3RoIiwiaCIsInBhcnNlSW50IiwidG9TdHJpbmciLCJyZXNpemUiLCJ0cmlnZ2VyIiwialF1ZXJ5IiwiR3ltIiwiUGFyc2UiLCJXYWxsIiwiUm91dGUiLCJIb2xkIiwiY2FsbGJhY2siLCJxdWVyeSIsIlF1ZXJ5IiwiZ2V0Iiwic3VjY2VzcyIsImVycm9yIiwiZXF1YWxUbyIsIlBhcnNlU2VydmljZVByb3ZpZGVyIiwiaW5pdGlhbGl6ZSIsIkJSQU5EX0NIQU5HRSIsIk5hdkJhckRpcmVjdGl2ZSIsInVzZXJNb2RlbCIsImhhbmRsZVVzZXJTaWduZWRJbiIsImhhbmRsZUJyYW5kQ2hhbmdlIiwibG9nb3V0IiwibmF2U2hvd2luZyIsImJyYW5kIiwiJCIsInNpZGVOYXYiLCIkbG9jYXRpb24iLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsImlzb2xhdGUiLCJsaW5rIiwiJHN0YXRlIiwiZ3ltTW9kZWwiLCJ3YWxsTW9kZWwiLCJkb2N1bWVudCIsInJlYWR5IiwidGFicyIsInBhcmFtcyIsImhhbmRsZVdhbGxMb2FkZWQiLCJXYWxsTGlzdERpcmVjdGl2ZSIsImdldFdhbGxzIiwiaGFuZGxlVXNlckNoYW5nZSIsImhhbmRsZVdhbGxzQ2hhbmdlIiwibG9nIiwiV2FsbExpc3RJdGVtRGlyZWN0aXZlIiwicm9vdENhbnZhcyIsInJvb3RJbWFnZSIsImFyZWFDbGlja2VkIiwib25yZXNpemUiLCJvblJlc2l6ZSIsInRoYXQiLCJvbiIsImhpZ2hsaWdodE1hcCIsImNzcyIsIm9mZiIsImNyZWF0ZVJvb3RDYW52YXMiLCJpbWFnZSIsImltZ1dpZHRoIiwiaW1nSGVpZ2h0IiwicG9zaXRpb24iLCJ0b3AiLCJsZWZ0IiwiYmVmb3JlIiwiY3R4IiwiZ2V0Q29udGV4dCIsImRyYXdJbWFnZSIsInJlZHJhd1Jvb3RDYW52YXMiLCJjbGVhclJlY3QiLCJjb250ZW50QXJlYSIsIm1hcCIsIm1hcEFyZWFzIiwiaW1nQXR0cldpZHRoIiwiaW1nQXR0ckhlaWdodCIsInhGYWN0b3IiLCJwYXJzZUZsb2F0IiwieUZhY3RvciIsImFyZWEiLCJhcmVhRWwiLCJjb29yZHMiLCJ2YWx1ZSIsImNhbnZhcyIsImFkZENsYXNzIiwib3BhY2l0eSIsImRpc3BsYXkiLCJmaWxsU3R5bGUiLCJ4IiwieSIsImJlZ2luUGF0aCIsIm1vdmVUbyIsImxlbiIsImxpbmVUbyIsImNsb3NlUGF0aCIsImZpbGwiLCJwcmV2ZW50RGVmYXVsdCIsImFuaW1hdGUiLCJyZXNpemVUaW1lb3V0IiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsIlJvdXRlTGlzdERpcmVjdGl2ZSIsImdyYWRlIiwiY29sb3IiLCJSb3V0ZUxpc3RJdGVtRGlyZWN0aXZlIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxHQUNBLFlBSUEsU0FBQUMsTUFIQSxHQUFBQyxHQUFBLE1BQUFDLEtBQUEsV0FBQUMsTUFBQSxhQUFBLElBTUFILEdB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bihnbG9iYWwpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG4gIHZhciBmblRlc3QgPSAveHl6Ly50ZXN0KGZ1bmN0aW9uKCl7eHl6O30pID8gL1xcYl9zdXBlclxcYi8gOiAvLiovO1xuXG4gIC8vIFRoZSBiYXNlIENsYXNzIGltcGxlbWVudGF0aW9uIChkb2VzIG5vdGhpbmcpXG4gIGZ1bmN0aW9uIEJhc2VDbGFzcygpe31cblxuICAvLyBDcmVhdGUgYSBuZXcgQ2xhc3MgdGhhdCBpbmhlcml0cyBmcm9tIHRoaXMgY2xhc3NcbiAgQmFzZUNsYXNzLmV4dGVuZCA9IGZ1bmN0aW9uKHByb3BzKSB7XG4gICAgdmFyIF9zdXBlciA9IHRoaXMucHJvdG90eXBlO1xuXG4gICAgLy8gU2V0IHVwIHRoZSBwcm90b3R5cGUgdG8gaW5oZXJpdCBmcm9tIHRoZSBiYXNlIGNsYXNzXG4gICAgLy8gKGJ1dCB3aXRob3V0IHJ1bm5pbmcgdGhlIGluaXQgY29uc3RydWN0b3IpXG4gICAgdmFyIHByb3RvID0gT2JqZWN0LmNyZWF0ZShfc3VwZXIpO1xuXG4gICAgLy8gQ29weSB0aGUgcHJvcGVydGllcyBvdmVyIG9udG8gdGhlIG5ldyBwcm90b3R5cGVcbiAgICBmb3IgKHZhciBuYW1lIGluIHByb3BzKSB7XG4gICAgICAvLyBDaGVjayBpZiB3ZSdyZSBvdmVyd3JpdGluZyBhbiBleGlzdGluZyBmdW5jdGlvblxuICAgICAgcHJvdG9bbmFtZV0gPSB0eXBlb2YgcHJvcHNbbmFtZV0gPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICB0eXBlb2YgX3N1cGVyW25hbWVdID09IFwiZnVuY3Rpb25cIiAmJiBmblRlc3QudGVzdChwcm9wc1tuYW1lXSlcbiAgICAgICAgPyAoZnVuY3Rpb24obmFtZSwgZm4pe1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICB2YXIgdG1wID0gdGhpcy5fc3VwZXI7XG5cbiAgICAgICAgICAgICAgLy8gQWRkIGEgbmV3IC5fc3VwZXIoKSBtZXRob2QgdGhhdCBpcyB0aGUgc2FtZSBtZXRob2RcbiAgICAgICAgICAgICAgLy8gYnV0IG9uIHRoZSBzdXBlci1jbGFzc1xuICAgICAgICAgICAgICB0aGlzLl9zdXBlciA9IF9zdXBlcltuYW1lXTtcblxuICAgICAgICAgICAgICAvLyBUaGUgbWV0aG9kIG9ubHkgbmVlZCB0byBiZSBib3VuZCB0ZW1wb3JhcmlseSwgc28gd2VcbiAgICAgICAgICAgICAgLy8gcmVtb3ZlIGl0IHdoZW4gd2UncmUgZG9uZSBleGVjdXRpbmdcbiAgICAgICAgICAgICAgdmFyIHJldCA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgIHRoaXMuX3N1cGVyID0gdG1wO1xuXG4gICAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0pKG5hbWUsIHByb3BzW25hbWVdKVxuICAgICAgICA6IHByb3BzW25hbWVdO1xuICAgIH1cblxuICAgIC8vIFRoZSBuZXcgY29uc3RydWN0b3JcbiAgICB2YXIgbmV3Q2xhc3MgPSB0eXBlb2YgcHJvdG8uaW5pdCA9PT0gXCJmdW5jdGlvblwiXG4gICAgICA/IHByb3RvLmhhc093blByb3BlcnR5KFwiaW5pdFwiKVxuICAgICAgICA/IHByb3RvLmluaXQgLy8gQWxsIGNvbnN0cnVjdGlvbiBpcyBhY3R1YWxseSBkb25lIGluIHRoZSBpbml0IG1ldGhvZFxuICAgICAgICA6IGZ1bmN0aW9uIFN1YkNsYXNzKCl7IF9zdXBlci5pbml0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH1cbiAgICAgIDogZnVuY3Rpb24gRW1wdHlDbGFzcygpe307XG5cbiAgICAvLyBQb3B1bGF0ZSBvdXIgY29uc3RydWN0ZWQgcHJvdG90eXBlIG9iamVjdFxuICAgIG5ld0NsYXNzLnByb3RvdHlwZSA9IHByb3RvO1xuXG4gICAgLy8gRW5mb3JjZSB0aGUgY29uc3RydWN0b3IgdG8gYmUgd2hhdCB3ZSBleHBlY3RcbiAgICBwcm90by5jb25zdHJ1Y3RvciA9IG5ld0NsYXNzO1xuXG4gICAgLy8gQW5kIG1ha2UgdGhpcyBjbGFzcyBleHRlbmRhYmxlXG4gICAgbmV3Q2xhc3MuZXh0ZW5kID0gQmFzZUNsYXNzLmV4dGVuZDtcblxuICAgIHJldHVybiBuZXdDbGFzcztcbiAgfTtcblxuICAvLyBleHBvcnRcbiAgZ2xvYmFsLkNsYXNzID0gQmFzZUNsYXNzO1xufSkodGhpcyk7XG4iLCJ2YXIgQmFzZUNvbnRyb2xsZXIgPSBDbGFzcy5leHRlbmQoe1xuICAgIHNjb3BlOiBudWxsLFxuXG4gICAgaW5pdDpmdW5jdGlvbihzY29wZSl7XG5cdHRoaXMuJHNjb3BlID0gc2NvcGU7XG5cdHRoaXMuZGVmaW5lTGlzdGVuZXJzKCk7XG5cdHRoaXMuZGVmaW5lU2NvcGUoKTtcbiAgICB9LFxuXG4gICAgZGVmaW5lTGlzdGVuZXJzOiBmdW5jdGlvbigpe1xuXHR0aGlzLiRzY29wZS4kb24oJyRkZXN0cm95Jyx0aGlzLmRlc3Ryb3kuYmluZCh0aGlzKSk7XG4gICAgfSxcblxuXG4gICAgZGVmaW5lU2NvcGU6IGZ1bmN0aW9uKCl7XG5cdC8vT1ZFUlJJREVcbiAgICB9LFxuXG5cbiAgICBkZXN0cm95OmZ1bmN0aW9uKGV2ZW50KXtcblx0Ly9PVkVSUklERVxuICAgIH1cbn0pO1xuXG5CYXNlQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnXTtcbiIsInZhciBCYXNlRGlyZWN0aXZlID0gQ2xhc3MuZXh0ZW5kKHtcbiAgICBzY29wZTogbnVsbCxcblxuICAgIGluaXQ6ZnVuY3Rpb24oc2NvcGUpe1xuXHR0aGlzLiRzY29wZSA9IHNjb3BlO1xuXHR0aGlzLmRlZmluZUxpc3RlbmVycygpO1xuXHR0aGlzLmRlZmluZVNjb3BlKCk7XG4gICAgfSxcblxuICAgIGRlZmluZUxpc3RlbmVyczogZnVuY3Rpb24oKXtcblx0dGhpcy4kc2NvcGUuJG9uKCckZGVzdHJveScsdGhpcy5kZXN0cm95LmJpbmQodGhpcykpO1xuICAgIH0sXG5cblxuICAgIGRlZmluZVNjb3BlOiBmdW5jdGlvbigpe1xuXHQvL09WRVJSSURFXG4gICAgfSxcblxuXG4gICAgZGVzdHJveTpmdW5jdGlvbihldmVudCl7XG5cdC8vT1ZFUlJJREVcbiAgICB9XG59KTtcblxuQmFzZURpcmVjdGl2ZS4kaW5qZWN0ID0gWyckc2NvcGUnXTtcbiIsIi8qKlxuKiBFdmVudCBkaXNwYXRjaGVyIGNsYXNzLFxuKiBhZGQgYWJpbGl0eSB0byBkaXNwYXRjaCBldmVudFxuKiBvbiBuYXRpdmUgY2xhc3Nlcy5cbipcbiogVXNlIG9mIENsYXNzLmpzXG4qXG4qIEBhdXRob3IgdW5pdmVyc2FsbWluZC5jb21cbiovXG52YXIgRXZlbnREaXNwYXRjaGVyID0gQ2xhc3MuZXh0ZW5kKHtcbiAgICBfbGlzdGVuZXJzOnt9LFxuXG4gICAgLyoqXG4gICAgKiBBZGQgYSBsaXN0ZW5lciBvbiB0aGUgb2JqZWN0XG4gICAgKiBAcGFyYW0gdHlwZSA6IEV2ZW50IHR5cGVcbiAgICAqIEBwYXJhbSBsaXN0ZW5lciA6IExpc3RlbmVyIGNhbGxiYWNrXG4gICAgKi8gIFxuICAgIGFkZEV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24odHlwZSxsaXN0ZW5lcil7XG4gICAgICAgIGlmKCF0aGlzLl9saXN0ZW5lcnNbdHlwZV0pe1xuICAgICAgICAgICAgdGhpcy5fbGlzdGVuZXJzW3R5cGVdID0gW107XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbGlzdGVuZXJzW3R5cGVdLnB1c2gobGlzdGVuZXIpXG4gICAgfSxcblxuXG4gICAgLyoqXG4gICAgICAgKiBSZW1vdmUgYSBsaXN0ZW5lciBvbiB0aGUgb2JqZWN0XG4gICAgICAgKiBAcGFyYW0gdHlwZSA6IEV2ZW50IHR5cGVcbiAgICAgICAqIEBwYXJhbSBsaXN0ZW5lciA6IExpc3RlbmVyIGNhbGxiYWNrXG4gICAgICAgKi8gIFxuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24odHlwZSxsaXN0ZW5lcil7XG4gICAgICBpZih0aGlzLl9saXN0ZW5lcnNbdHlwZV0pe1xuICAgICAgICB2YXIgaW5kZXggPSB0aGlzLl9saXN0ZW5lcnNbdHlwZV0uaW5kZXhPZihsaXN0ZW5lcik7XG5cbiAgICAgICAgaWYoaW5kZXghPT0tMSl7XG4gICAgICAgICAgICB0aGlzLl9saXN0ZW5lcnNbdHlwZV0uc3BsaWNlKGluZGV4LDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuXG4gICAgLyoqXG4gICAgKiBEaXNwYXRjaCBhbiBldmVudCB0byBhbGwgcmVnaXN0ZXJlZCBsaXN0ZW5lclxuICAgICogQHBhcmFtIE11dGlwbGUgcGFyYW1zIGF2YWlsYWJsZSwgZmlyc3QgbXVzdCBiZSBzdHJpbmdcbiAgICAqLyBcbiAgICBkaXNwYXRjaEV2ZW50OmZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBsaXN0ZW5lcnM7XG5cbiAgICAgICAgaWYodHlwZW9mIGFyZ3VtZW50c1swXSAhPT0gJ3N0cmluZycpe1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdFdmVudERpc3BhdGNoZXInLCdGaXJzdCBwYXJhbXMgbXVzdCBiZSBhbiBldmVudCB0eXBlIChTdHJpbmcpJylcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnNbYXJndW1lbnRzWzBdXTtcblxuICAgICAgICAgICAgZm9yKHZhciBrZXkgaW4gbGlzdGVuZXJzKXtcbiAgICAgICAgICAgICAgICAvL1RoaXMgY291bGQgdXNlIC5hcHBseShhcmd1bWVudHMpIGluc3RlYWQsIGJ1dCB0aGVyZSBpcyBjdXJyZW50bHkgYSBidWcgd2l0aCBpdC5cbiAgICAgICAgICAgICAgICBsaXN0ZW5lcnNba2V5XShhcmd1bWVudHNbMF0sYXJndW1lbnRzWzFdLGFyZ3VtZW50c1syXSxhcmd1bWVudHNbM10sYXJndW1lbnRzWzRdLGFyZ3VtZW50c1s1XSxhcmd1bWVudHNbNl0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSlcblxuXG4iLCIvKipcbiogU2ltcGxlIG5hbWVzcGFjZSB1dGlsIHRvIGV4dGFuZCBDbGFzcy5qcyBmdW5jdGlvbmFsaXR5XG4qIGFuZCB3cmFwIGNsYXNzZXMgaW4gbmFtZXNwYWNlLlxuKiBAYXV0aG9yIHRvbW15LnJvY2hldHRlW2ZvbGxvd2VkIGJ5IHRoZSB1c3VhbCBzaWduXXVuaXZlcnNhbG1pbmQuY29tXG4qIEB0eXBlIHsqfVxuKiBAcmV0dXJuIE9iamVjdFxuKi9cbndpbmRvdy5uYW1lc3BhY2UgPSBmdW5jdGlvbihuYW1lc3BhY2VzKXtcbiAgICd1c2Ugc3RyaWN0JztcbiAgIHZhciBuYW1lcyA9IG5hbWVzcGFjZXMuc3BsaXQoJy4nKTtcbiAgIHZhciBsYXN0ICA9IHdpbmRvdztcbiAgIHZhciBuYW1lICA9IG51bGw7XG4gICB2YXIgaSAgICAgPSBudWxsO1xuXG4gICBmb3IoaSBpbiBuYW1lcyl7XG4gICAgICAgbmFtZSA9IG5hbWVzW2ldO1xuXG4gICAgICAgaWYobGFzdFtuYW1lXT09PXVuZGVmaW5lZCl7XG4gICAgICAgICAgIGxhc3RbbmFtZV0gPSB7fTtcbiAgICAgICB9XG5cbiAgICAgICBsYXN0ID0gbGFzdFtuYW1lXTtcbiAgIH1cbiAgIHJldHVybiBsYXN0O1xufTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICAndXNlIHN0cmljdCc7XG4gICAvKipcblx0ICogQ3JlYXRlIGEgZ2xvYmFsIGV2ZW50IGRpc3BhdGNoZXJcblx0ICogdGhhdCBjYW4gYmUgaW5qZWN0ZWQgYWNjcm9zcyBtdWx0aXBsZSBjb21wb25lbnRzXG5cdCAqIGluc2lkZSB0aGUgYXBwbGljYXRpb25cblx0ICpcblx0ICogVXNlIG9mIENsYXNzLmpzXG5cdCAqIEB0eXBlIHtjbGFzc31cblx0ICogQGF1dGhvciB1bml2ZXJzYWxtaW5kLmNvbVxuXHQgKi9cbiAgIHZhciBOb3RpZmljYXRpb25zUHJvdmlkZXIgPSBDbGFzcy5leHRlbmQoe1xuXG4gICAgICAgaW5zdGFuY2U6IG5ldyBFdmVudERpc3BhdGNoZXIoKSxcblxuICAgICAgIC8qKlxuICAgICAgICAqIENvbmZpZ3VyZXMgYW5kIHJldHVybnMgaW5zdGFuY2Ugb2YgR2xvYmFsRXZlbnRCdXMuXG4gICAgICAgICpcbiAgICAgICAgKiBAcmV0dXJuIHtHbG9iYWxFdmVudEJ1c31cbiAgICAgICAgKi9cbiAgICAgICAkZ2V0OiBbZnVuY3Rpb24gKCkge1xuICAgICAgIFx0ICAgdGhpcy5pbnN0YW5jZS5ub3RpZnkgPSB0aGlzLmluc3RhbmNlLmRpc3BhdGNoRXZlbnQ7XG4gICAgICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlO1xuICAgICAgIH1dXG4gICB9KTtcblxuICAgYW5ndWxhci5tb2R1bGUoJ25vdGlmaWNhdGlvbnMnLCBbXSlcbiAgICAgICAucHJvdmlkZXIoJ05vdGlmaWNhdGlvbnMnLCBOb3RpZmljYXRpb25zUHJvdmlkZXIpO1xufSgpKTsiLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdzYnAnLCBbXG4gICAgJ25vdGlmaWNhdGlvbnMnLFxuXG4gICAgJ25hdmJhcicsXG5cbiAgICAvL0d5bXNcbiAgICAnR3ltTW9kZWwnLFxuXG4gICAgLy9XYWxsc1xuICAgICdXYWxsTW9kZWwnLFxuICAgICd3YWxsTGlzdCcsXG4gICAgJ3dhbGxMaXN0SXRlbScsXG5cbiAgICAvL1JvdXRlc1xuICAgICdSb3V0ZU1vZGVsJyxcbiAgICAncm91dGVMaXN0JyxcbiAgICAncm91dGVMaXN0SXRlbScsXG5cblxuICAgIC8vVXNlclxuICAgICdVc2VyTW9kZWwnLFxuXG4gICAgLy9QYXJzZVxuICAgICdQYXJzZVNlcnZpY2UnLFxuXG4gICAgJ3VpLnJvdXRlcicsXG4gICAgJ25nQ29va2llcycsXG4gICAgJ25nQW5pbWF0ZSdcblxuXSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnc2JwJykuY29uZmlnKGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcblxuICAgIHZhciBpbml0R3ltID0gZnVuY3Rpb24oR3ltTW9kZWwpe1xuICAgICAgICByZXR1cm4gR3ltTW9kZWwuZ2V0RGVmYXVsdEd5bSgpO1xuICAgIH07XG5cblxuICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoXCIvZ3ltL21hcFwiKTtcblxuICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgIC5zdGF0ZSgnZ3ltTWFwJywge1xuICAgICAgICAgICAgdXJsOiBcIi9neW0vbWFwXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJwYXJ0aWFscy9neW0vbWFwL21hcC5odG1sXCIsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBHeW1NYXBDb250cm9sbGVyLFxuICAgICAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgICAgIGluaXRHeW06IGluaXRHeW1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLnN0YXRlKCd3YWxscycsIHtcbiAgICAgICAgICAgIHVybDogXCIvd2FsbHNcIixcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInBhcnRpYWxzL3dhbGxzL3dhbGxzUGFnZS5odG1sXCIsXG4gICAgICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICAgICAgaW5pdEd5bTogaW5pdEd5bVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuc3RhdGUoJ3dhbGwnLCB7XG4gICAgICAgICAgICB1cmw6IFwiL3dhbGxzLzppZFwiLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwicGFydGlhbHMvd2FsbHMvd2FsbFBhZ2UuaHRtbFwiLFxuICAgICAgICAgICAgY29udHJvbGxlcjogV2FsbENvbnRyb2xsZXIsXG4gICAgICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICAgICAgaW5pdEd5bTogaW5pdEd5bVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuc3RhdGUoJ3JvdXRlcycsIHtcbiAgICAgICAgICAgIHVybDogXCIvcm91dGVzXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJwYXJ0aWFscy9yb3V0ZXMvcm91dGVzLmh0bWxcIixcbiAgICAgICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAgICAgICBpbml0R3ltOiBpbml0R3ltXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5zdGF0ZSgndXNlclNldHRpbmdzJywge1xuICAgICAgICAgICAgdXJsOiBcIi91c2Vycy86aWQvc2V0dGluZ3NcIixcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInBhcnRpYWxzL3NldHRpbmdzUGFnZS5odG1sXCIsXG4gICAgICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICAgICAgaW5pdEd5bTogaW5pdEd5bVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5uYW1lc3BhY2UoJ21vZGVscy5ldmVudHMnKS5HWU1fTE9BREVEID0gXCJBY3Rpdml0eU1vZGVsLkdZTV9MT0FERURcIjtcbm5hbWVzcGFjZSgnbW9kZWxzLmV2ZW50cycpLkdZTVNfTE9BREVEID0gXCJBY3Rpdml0eU1vZGVsLkdZTVNfTE9BREVEXCI7XG5cbnZhciBHeW1Nb2RlbCA9IEV2ZW50RGlzcGF0Y2hlci5leHRlbmQoe1xuICAgIGd5bToge30sXG4gICAgZ3ltczogW10sXG5cbiAgICBub3RpZmljYXRpb25zOiBudWxsLFxuICAgIHBhcnNlU2VydmljZTogbnVsbCxcblxuICAgIGdldERlZmF1bHRHeW06IGZ1bmN0aW9uKCl7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlU2VydmljZS5nZXREZWZhdWx0R3ltKGZ1bmN0aW9uKGd5bSl7XG4gICAgICAgICAgICB0aGlzLmd5bSA9IGd5bTtcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICB9LFxuXG4gICAgZ2V0R3ltQnlJZDogZnVuY3Rpb24oaWQpe1xuXG4gICAgfSxcblxuICAgIGdldEd5bXM6IGZ1bmN0aW9uKGd5bSl7XG5cbiAgICB9XG5cbn0pO1xuXG5cbihmdW5jdGlvbiAoKXtcbiAgICB2YXIgR3ltTW9kZWxQcm92aWRlciA9IENsYXNzLmV4dGVuZCh7XG5cdGluc3RhbmNlOiBuZXcgR3ltTW9kZWwoKSxcblxuXHQkZ2V0OiBmdW5jdGlvbihOb3RpZmljYXRpb25zLCBQYXJzZVNlcnZpY2Upe1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5ub3RpZmljYXRpb25zID0gTm90aWZpY2F0aW9ucztcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UucGFyc2VTZXJ2aWNlID0gUGFyc2VTZXJ2aWNlO1xuXHQgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2U7XG5cdH1cbiAgICB9KTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdHeW1Nb2RlbCcsW10pXG5cdC5wcm92aWRlcignR3ltTW9kZWwnLCBHeW1Nb2RlbFByb3ZpZGVyKTtcbn0oKSk7XG4iLCIndXNlIHN0cmljdCc7XG5uYW1lc3BhY2UoJ21vZGVscy5ldmVudHMnKS5ST1VURV9MT0FERUQgPSBcIkFjdGl2aXR5TW9kZWwuUk9VVEVfTE9BREVEXCI7XG5cbnZhciBSb3V0ZU1vZGVsID0gRXZlbnREaXNwYXRjaGVyLmV4dGVuZCh7XG4gICAgcm91dGU6IHt9LFxuICAgIHJvdXRlczogW10sXG5cbiAgICBub3RpZmljYXRpb25zOiBudWxsLFxuICAgIGdhbWVTZXJ2aWNlOiBudWxsLFxuXG4gICAgZ2V0Um91dGVCeUlkOiBmdW5jdGlvbihpZCl7XG4gICAgICAgIHZhciBwcm9taXNlID0gdGhpcy5HYW1lU2VydmljZS5nZXRHYW1lQnlJZChpZCk7XG4gICAgfSxcblxuICAgIGdldFJvdXRlc0J5V2FsbDogZnVuY3Rpb24od2FsbCl7XG5cbiAgICB9LFxuXG4gICAgY3JlYXRlUm91dGU6IGZ1bmN0aW9uKHdhbGwpe1xuXG4gICAgfSxcblxuICAgIHNhdmVSb3V0ZTogZnVuY3Rpb24ocm91dGUpe1xuXG4gICAgfSxcblxuICAgIHNhdmVSb3V0ZXM6IGZ1bmN0aW9uKHJvdXRlcyl7XG5cbiAgICB9XG5cbn0pO1xuXG5cbihmdW5jdGlvbiAoKXtcbiAgICB2YXIgUm91dGVNb2RlbFByb3ZpZGVyID0gQ2xhc3MuZXh0ZW5kKHtcblx0aW5zdGFuY2U6IG5ldyBSb3V0ZU1vZGVsKCksXG5cblx0JGdldDogZnVuY3Rpb24oIE5vdGlmaWNhdGlvbnMsIFBhcnNlU2VydmljZSl7XG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlLm5vdGlmaWNhdGlvbnMgPSBOb3RpZmljYXRpb25zO1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5wYXJzZVNlcnZpY2UgPSBQYXJzZVNlcnZpY2U7XG5cdCAgICByZXR1cm4gdGhpcy5pbnN0YW5jZTtcblx0fVxuICAgIH0pO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ1JvdXRlTW9kZWwnLFtdKVxuXHQucHJvdmlkZXIoJ1JvdXRlTW9kZWwnLCBSb3V0ZU1vZGVsUHJvdmlkZXIpO1xufSgpKTtcbiIsIid1c2Ugc3RyaWN0JztcblxubmFtZXNwYWNlKCdtb2RlbHMuZXZlbnRzJykuVVNFUl9TSUdORURfSU4gPSBcIkFjdGl2aXR5TW9kZWwuVVNFUl9TSUdORURfSU5cIjtcbm5hbWVzcGFjZSgnbW9kZWxzLmV2ZW50cycpLlVTRVJfU0lHTkVEX09VVCA9IFwiQWN0aXZpdHlNb2RlbC5VU0VSX1NJR05FRF9PVVRcIjtcbm5hbWVzcGFjZSgnbW9kZWxzLmV2ZW50cycpLlVTRVJfVVBEQVRFRCA9IFwiQWN0aXZpdHlNb2RlbC5VU0VSX1VQREFURURcIjtcbm5hbWVzcGFjZSgnbW9kZWxzLmV2ZW50cycpLlBST0ZJTEVfTE9BREVEID0gXCJBY3Rpdml0eU1vZGVsLlBST0ZJTEVfTE9BREVEXCI7XG5uYW1lc3BhY2UoJ21vZGVscy5ldmVudHMnKS5BVVRIX0VSUk9SID0gXCJBY3Rpdml0eU1vZGVsLkFVVEhfRVJST1JcIjtcbm5hbWVzcGFjZSgnbW9kZWxzLmV2ZW50cycpLk5FVFdPUktfRVJST1IgPSBcIkFjdGl2aXR5TW9kZWwuTkVUV09SS19FUlJPUlwiO1xuXG52YXIgVXNlck1vZGVsID0gRXZlbnREaXNwYXRjaGVyLmV4dGVuZCh7XG4gICAgY3VycmVudFVzZXI6IG51bGwsXG5cbiAgICBQYXJzZVNlcnZpY2U6bnVsbCxcbiAgICBub3RpZmljYXRpb25zOiBudWxsLFxuXG4gICAgc2lnbkluOiBmdW5jdGlvbihlbWFpbCwgcGFzc3dvcmQpe1xuXG4gICAgfSxcblxuICAgIHNpZ25PdXQ6IGZ1bmN0aW9uKCl7XG5cbiAgICB9LFxuXG4gICAgdXBkYXRlVXNlcjogZnVuY3Rpb24odXNlcil7XG5cbiAgICB9XG5cbn0pO1xuXG5cbihmdW5jdGlvbiAoKXtcbiAgICB2YXIgVXNlck1vZGVsUHJvdmlkZXIgPSBDbGFzcy5leHRlbmQoe1xuXHRpbnN0YW5jZTogbmV3IFVzZXJNb2RlbCgpLFxuXG5cdCRnZXQ6IGZ1bmN0aW9uKFBhcnNlU2VydmljZSwgTm90aWZpY2F0aW9ucyl7XG5cdCAgICB0aGlzLmluc3RhbmNlLlBhcnNlU2VydmljZSA9IFBhcnNlU2VydmljZTtcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2Uubm90aWZpY2F0aW9ucyA9IE5vdGlmaWNhdGlvbnM7XG5cdCAgICByZXR1cm4gdGhpcy5pbnN0YW5jZTtcblx0fVxuICAgIH0pO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ1VzZXJNb2RlbCcsW10pXG5cdC5wcm92aWRlcignVXNlck1vZGVsJywgVXNlck1vZGVsUHJvdmlkZXIpO1xufSgpKTtcbiIsIid1c2Ugc3RyaWN0Jztcbm5hbWVzcGFjZSgnbW9kZWxzLmV2ZW50cycpLldBTExfTE9BREVEID0gXCJBY3Rpdml0eU1vZGVsLldBTExfTE9BREVEXCI7XG5uYW1lc3BhY2UoJ21vZGVscy5ldmVudHMnKS5XQUxMU19MT0FERUQgPSBcIkFjdGl2aXR5TW9kZWwuV0FMTFNfTE9BREVEXCI7XG5cbnZhciBXYWxsTW9kZWwgPSBFdmVudERpc3BhdGNoZXIuZXh0ZW5kKHtcbiAgICB3YWxsOiB7fSxcbiAgICB3YWxsczogW10sXG5cbiAgICBub3RpZmljYXRpb25zOiBudWxsLFxuICAgIHBhcnNlU2VydmljZTogbnVsbCxcblxuICAgIGdldFdhbGxCeUlkOiBmdW5jdGlvbihpZCl7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlU2VydmljZS5nZXRXYWxsQnlJZChpZCwgZnVuY3Rpb24ocmVzdWx0cyl7XG4gICAgICAgICAgICB0aGlzLndhbGwgPSByZXN1bHRzO1xuICAgICAgICAgICAgdGhpcy5ub3RpZmljYXRpb25zLm5vdGlmeShtb2RlbHMuZXZlbnRzLldBTExfTE9BREVEKTtcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICB9LFxuXG4gICAgZ2V0V2FsbHNCeUd5bTogZnVuY3Rpb24oZ3ltKXtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VTZXJ2aWNlLmdldFdhbGxzQnlHeW0oZ3ltLCBmdW5jdGlvbihyZXN1bHRzKXtcbiAgICAgICAgICAgIHRoaXMud2FsbHMgPSByZXN1bHRzO1xuICAgICAgICAgICAgdGhpcy5ub3RpZmljYXRpb25zLm5vdGlmeShtb2RlbHMuZXZlbnRzLldBTExTX0xPQURFRCk7XG4gICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgfSxcblxuICAgIGNyZWF0ZVdhbGw6IGZ1bmN0aW9uKGd5bSl7XG5cbiAgICB9LFxuXG4gICAgc2F2ZVdhbGw6IGZ1bmN0aW9uKHdhbGwpe1xuXG4gICAgfSxcblxuICAgIGRlbGV0ZVdhbGw6IGZ1bmN0aW9uKHdhbGwpe1xuXG4gICAgfVxuXG59KTtcblxuXG4oZnVuY3Rpb24gKCl7XG4gICAgdmFyIFdhbGxNb2RlbFByb3ZpZGVyID0gQ2xhc3MuZXh0ZW5kKHtcblx0aW5zdGFuY2U6IG5ldyBXYWxsTW9kZWwoKSxcblxuXHQkZ2V0OiBmdW5jdGlvbiggTm90aWZpY2F0aW9ucywgUGFyc2VTZXJ2aWNlKXtcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2Uubm90aWZpY2F0aW9ucyA9IE5vdGlmaWNhdGlvbnM7XG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlLnBhcnNlU2VydmljZSA9IFBhcnNlU2VydmljZTtcblx0ICAgIHJldHVybiB0aGlzLmluc3RhbmNlO1xuXHR9XG4gICAgfSk7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnV2FsbE1vZGVsJyxbXSlcblx0LnByb3ZpZGVyKCdXYWxsTW9kZWwnLCBXYWxsTW9kZWxQcm92aWRlcik7XG59KCkpO1xuIiwiLypcclxuKiByd2RJbWFnZU1hcHMgalF1ZXJ5IHBsdWdpbiB2MS41XHJcbipcclxuKiBBbGxvd3MgaW1hZ2UgbWFwcyB0byBiZSB1c2VkIGluIGEgcmVzcG9uc2l2ZSBkZXNpZ24gYnkgcmVjYWxjdWxhdGluZyB0aGUgYXJlYSBjb29yZGluYXRlcyB0byBtYXRjaCB0aGUgYWN0dWFsIGltYWdlIHNpemUgb24gbG9hZCBhbmQgd2luZG93LnJlc2l6ZVxyXG4qXHJcbiogQ29weXJpZ2h0IChjKSAyMDEzIE1hdHQgU3Rvd1xyXG4qIGh0dHBzOi8vZ2l0aHViLmNvbS9zdG93YmFsbC9qUXVlcnktcndkSW1hZ2VNYXBzXHJcbiogaHR0cDovL21hdHRzdG93LmNvbVxyXG4qIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxyXG4qL1xyXG47KGZ1bmN0aW9uKGEpe2EuZm4ucndkSW1hZ2VNYXBzPWZ1bmN0aW9uKCl7dmFyIGM9dGhpczt2YXIgYj1mdW5jdGlvbigpe2MuZWFjaChmdW5jdGlvbigpe2lmKHR5cGVvZihhKHRoaXMpLmF0dHIoXCJ1c2VtYXBcIikpPT1cInVuZGVmaW5lZFwiKXtyZXR1cm59dmFyIGU9dGhpcyxkPWEoZSk7YShcIjxpbWcgLz5cIikubG9hZChmdW5jdGlvbigpe3ZhciBnPVwid2lkdGhcIixtPVwiaGVpZ2h0XCIsbj1kLmF0dHIoZyksaj1kLmF0dHIobSk7aWYoIW58fCFqKXt2YXIgbz1uZXcgSW1hZ2UoKTtvLnNyYz1kLmF0dHIoXCJzcmNcIik7aWYoIW4pe249by53aWR0aH1pZighail7aj1vLmhlaWdodH19dmFyIGY9ZC53aWR0aCgpLzEwMCxrPWQuaGVpZ2h0KCkvMTAwLGk9ZC5hdHRyKFwidXNlbWFwXCIpLnJlcGxhY2UoXCIjXCIsXCJcIiksbD1cImNvb3Jkc1wiO2EoJ21hcFtuYW1lPVwiJytpKydcIl0nKS5maW5kKFwiYXJlYVwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHI9YSh0aGlzKTtpZighci5kYXRhKGwpKXtyLmRhdGEobCxyLmF0dHIobCkpfXZhciBxPXIuZGF0YShsKS5zcGxpdChcIixcIikscD1uZXcgQXJyYXkocS5sZW5ndGgpO2Zvcih2YXIgaD0wO2g8cC5sZW5ndGg7KytoKXtpZihoJTI9PT0wKXtwW2hdPXBhcnNlSW50KCgocVtoXS9uKSoxMDApKmYpfWVsc2V7cFtoXT1wYXJzZUludCgoKHFbaF0vaikqMTAwKSprKX19ci5hdHRyKGwscC50b1N0cmluZygpKX0pfSkuYXR0cihcInNyY1wiLGQuYXR0cihcInNyY1wiKSl9KX07YSh3aW5kb3cpLnJlc2l6ZShiKS50cmlnZ2VyKFwicmVzaXplXCIpO3JldHVybiB0aGlzfX0pKGpRdWVyeSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgUGFyc2VTZXJ2aWNlID0gQ2xhc3MuZXh0ZW5kKHtcblxuICAgIEd5bTogUGFyc2UuT2JqZWN0LmV4dGVuZChcIkd5bVwiKSxcbiAgICBXYWxsOiBQYXJzZS5PYmplY3QuZXh0ZW5kKFwiV2FsbFwiKSxcbiAgICBSb3V0ZTogUGFyc2UuT2JqZWN0LmV4dGVuZChcIlJvdXRlXCIpLFxuICAgIEhvbGQ6IFBhcnNlLk9iamVjdC5leHRlbmQoXCJIb2xkXCIpLFxuXG5cbiAgICAvKiogVXNlcnMgKiovXG4gICAgc2lnbkluOiBmdW5jdGlvbihlbWFpbCwgcGFzc3dvcmQpe1xuXG4gICAgfSxcblxuICAgIHNpZ25PdXQ6IGZ1bmN0aW9uKCl7XG5cbiAgICB9LFxuXG4gICAgdXBkYXRlVXNlcjogZnVuY3Rpb24odXNlcil7XG5cbiAgICB9LFxuXG5cbiAgICAvKiogR3ltcyAqKi9cbiAgICBnZXREZWZhdWx0R3ltOiBmdW5jdGlvbihjYWxsYmFjayl7XG4gICAgICAgIHZhciBxdWVyeSA9IG5ldyBQYXJzZS5RdWVyeSh0aGlzLkd5bSk7XG4gICAgICAgIHJldHVybiBxdWVyeS5nZXQoXCI0V0NocGFIeERFXCIsIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGd5bSl7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZ3ltKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oZXJyb3Ipe1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcblxuXG4gICAgLyoqIFdhbGxzICoqL1xuICAgIGdldFdhbGxzQnlHeW06IGZ1bmN0aW9uKGd5bSwgY2FsbGJhY2spe1xuICAgICAgICB2YXIgcXVlcnkgPSBuZXcgUGFyc2UuUXVlcnkodGhpcy5XYWxsKTtcbiAgICAgICAgcXVlcnkuZXF1YWxUbyhcImd5bVwiLCBneW0pO1xuICAgICAgICBxdWVyeS5maW5kKHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHdhbGxzKXtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh3YWxscyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycm9yKXtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBnZXRXYWxsQnlJZDogZnVuY3Rpb24oaWQsIGNhbGxiYWNrKXtcbiAgICAgICAgdmFyIHF1ZXJ5ID0gbmV3IFBhcnNlLlF1ZXJ5KHRoaXMuV2FsbCk7XG4gICAgICAgIHJldHVybiBxdWVyeS5nZXQoaWQsIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHdhbGwpe1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHdhbGwpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihlcnJvcil7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LFxuXG5cbiAgICAvKiogUm91dGVzICoqL1xuXG5cblxuXG59KTtcblxuXG5cbihmdW5jdGlvbiAoKXtcbiAgICB2YXIgUGFyc2VTZXJ2aWNlUHJvdmlkZXIgPSBDbGFzcy5leHRlbmQoe1xuXHRpbnN0YW5jZTogbmV3IFBhcnNlU2VydmljZSgpLFxuXHQkZ2V0OiBmdW5jdGlvbigpe1xuXHQgICAgUGFyc2UuaW5pdGlhbGl6ZShcIk5Lbk05aXFhMGhucVpoQTFNMlRkeURZTU1NVnBXMjRRTmNxYVNaMllcIiwgXCJrN2Nla3ZYbVl1dEtYa3VTdU9wMnNjRmdia1JuQVVkUU1oNFNld3NHXCIpO1xuXHQgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2U7XG5cdH1cbiAgICB9KTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdQYXJzZVNlcnZpY2UnLFtdKVxuXHQucHJvdmlkZXIoJ1BhcnNlU2VydmljZScsIFBhcnNlU2VydmljZVByb3ZpZGVyKTtcbn0oKSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbm5hbWVzcGFjZSgnbW9kZWxzLmV2ZW50cycpLkJSQU5EX0NIQU5HRSA9IFwiQWN0aXZpdHlNb2RlbC5CUkFORF9DSEFOR0VcIjtcblxudmFyIE5hdkJhckRpcmVjdGl2ZSA9IEJhc2VEaXJlY3RpdmUuZXh0ZW5kKHtcbiAgICB1c2VyTW9kZWw6IG51bGwsXG4gICAgbm90aWZpY2F0aW9uczogbnVsbCxcblxuICAgIGluaXQ6IGZ1bmN0aW9uKCRzY29wZSwgVXNlck1vZGVsLCBOb3RpZmljYXRpb25zKXtcbiAgICAgICAgdGhpcy51c2VyTW9kZWwgPSBVc2VyTW9kZWw7XG4gICAgICAgIHRoaXMubm90aWZpY2F0aW9ucyA9IE5vdGlmaWNhdGlvbnM7XG4gICAgICAgIHRoaXMuX3N1cGVyKCRzY29wZSk7XG4gICAgfSxcblxuICAgIGRlZmluZUxpc3RlbmVyczogZnVuY3Rpb24oKXtcbiAgICAgICAgdGhpcy5ub3RpZmljYXRpb25zLmFkZEV2ZW50TGlzdGVuZXIobW9kZWxzLmV2ZW50cy5VU0VSX1NJR05FRF9JTiwgdGhpcy5oYW5kbGVVc2VyU2lnbmVkSW4uYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMubm90aWZpY2F0aW9ucy5hZGRFdmVudExpc3RlbmVyKG1vZGVscy5ldmVudHMuQlJBTkRfQ0hBTkdFLCB0aGlzLmhhbmRsZUJyYW5kQ2hhbmdlLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLiRzY29wZS5sb2dvdXQgPSB0aGlzLmxvZ291dC5iaW5kKHRoaXMpO1xuICAgIH0sXG5cbiAgICBkZWZpbmVTY29wZTogZnVuY3Rpb24oKXtcbiAgICAgICAgdGhpcy5uYXZTaG93aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuJHNjb3BlLmJyYW5kID0gXCJTQlBcIjtcbiAgICAgICAgdGhpcy4kc2NvcGUuY3VycmVudFVzZXIgPSB0aGlzLnVzZXJNb2RlbC5jdXJyZW50VXNlcjtcbiAgICAgICAgJChcIi5idXR0b24tY29sbGFwc2VcIikuc2lkZU5hdigpO1xuICAgIH0sXG5cbiAgICBsb2dvdXQ6IGZ1bmN0aW9uKCl7XG4gICAgICAgIHRoaXMudXNlck1vZGVsLmxvZ291dCgpO1xuICAgICAgICB0aGlzLiRsb2NhdGlvbi51cmwoXCIvXCIpO1xuICAgIH0sXG5cbiAgICAvKiogRVZFTlQgSEFORExFUlMgKiovXG4gICAgaGFuZGxlVXNlclNpZ25lZEluOiBmdW5jdGlvbigpe1xuICAgICAgICB0aGlzLiRzY29wZS5jdXJyZW50VXNlciA9IHRoaXMudXNlck1vZGVsLmN1cnJlbnRVc2VyO1xuICAgIH0sXG5cbiAgICBoYW5kbGVCcmFuZENoYW5nZTogZnVuY3Rpb24oZXZlbnQsIGJyYW5kKXtcbiAgICAgICAgdGhpcy4kc2NvcGUuYnJhbmQgPSBicmFuZDtcbiAgICB9XG59KTtcblxuYW5ndWxhci5tb2R1bGUoJ25hdmJhcicsW10pXG4gICAgLmRpcmVjdGl2ZSgnbmF2YmFyJywgZnVuY3Rpb24oVXNlck1vZGVsLCBOb3RpZmljYXRpb25zKXtcblx0cmV0dXJuIHtcblx0ICAgIHJlc3RyaWN0OidFJyxcblx0ICAgIGlzb2xhdGU6dHJ1ZSxcblx0ICAgIGxpbms6IGZ1bmN0aW9uKCRzY29wZSl7XG5cdFx0bmV3IE5hdkJhckRpcmVjdGl2ZSgkc2NvcGUsIFVzZXJNb2RlbCwgTm90aWZpY2F0aW9ucyk7XG5cdCAgICB9LFxuXHQgICAgc2NvcGU6dHJ1ZSxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInBhcnRpYWxzL25hdmJhci9uYXZiYXIuaHRtbFwiXG5cdH07XG4gICAgfSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBXYWxsQ29udHJvbGxlciA9IEJhc2VDb250cm9sbGVyLmV4dGVuZCh7XG4gICAgbm90aWZpY2F0aW9uczpudWxsLFxuXG4gICAgaW5pdDpmdW5jdGlvbigkc2NvcGUsICRzdGF0ZSwgTm90aWZpY2F0aW9ucywgR3ltTW9kZWwsIFdhbGxNb2RlbCwgVXNlck1vZGVsKXtcbiAgICAgICAgdGhpcy4kc3RhdGUgPSAkc3RhdGU7XG4gICAgICAgIHRoaXMuZ3ltTW9kZWwgPSBHeW1Nb2RlbDtcbiAgICAgICAgdGhpcy53YWxsTW9kZWwgPSBXYWxsTW9kZWw7XG4gICAgICAgIHRoaXMudXNlck1vZGVsID0gVXNlck1vZGVsO1xuXHR0aGlzLm5vdGlmaWNhdGlvbnMgPSBOb3RpZmljYXRpb25zO1xuXHR0aGlzLl9zdXBlcigkc2NvcGUpO1xuXG4gICAgICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAkKCd1bC50YWJzJykudGFicygpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLndhbGxNb2RlbC5nZXRXYWxsQnlJZCh0aGlzLiRzdGF0ZS5wYXJhbXMuaWQpO1xuICAgIH0sXG5cbiAgICBkZWZpbmVMaXN0ZW5lcnM6ZnVuY3Rpb24oKXtcbiAgICAgICAgdGhpcy5fc3VwZXIoKTtcbiAgICB9LFxuXG4gICAgZGVmaW5lU2NvcGU6ZnVuY3Rpb24oKXtcbiAgICAgICAgdGhpcy5ub3RpZmljYXRpb25zLmFkZEV2ZW50TGlzdGVuZXIobW9kZWxzLmV2ZW50cy5XQUxMX0xPQURFRCwgdGhpcy5oYW5kbGVXYWxsTG9hZGVkLmJpbmQodGhpcykpO1xuICAgIH0sXG5cbiAgICBkZXN0cm95OmZ1bmN0aW9uKCl7XG5cbiAgICB9LFxuXG4gICAgLyoqIEV2ZW50IEhhbmRsZXJzICoqL1xuICAgIGhhbmRsZVdhbGxMb2FkZWQ6IGZ1bmN0aW9uKCl7XG4gICAgICAgIHRoaXMuJHNjb3BlLndhbGwgPSB0aGlzLndhbGxNb2RlbC53YWxsO1xuICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbnMubm90aWZ5KG1vZGVscy5ldmVudHMuQlJBTkRfQ0hBTkdFLCB0aGlzLiRzY29wZS53YWxsLmdldCgnbmFtZScpKTtcbiAgICB9XG5cbn0pO1xuXG5cbldhbGxDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckc3RhdGUnLCAnTm90aWZpY2F0aW9ucycsICdHeW1Nb2RlbCcsICdXYWxsTW9kZWwnLCAnVXNlck1vZGVsJ107XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBXYWxsTGlzdERpcmVjdGl2ZSA9IEJhc2VEaXJlY3RpdmUuZXh0ZW5kKHtcbiAgICB1c2VyTW9kZWw6IG51bGwsXG4gICAgbm90aWZpY2F0aW9uczogbnVsbCxcblxuICAgIGluaXQ6IGZ1bmN0aW9uKCRzY29wZSwgV2FsbE1vZGVsLCBHeW1Nb2RlbCwgVXNlck1vZGVsLCBOb3RpZmljYXRpb25zKXtcbiAgICAgICAgdGhpcy53YWxsTW9kZWwgPSBXYWxsTW9kZWw7XG4gICAgICAgIHRoaXMuZ3ltTW9kZWwgPSBHeW1Nb2RlbDtcbiAgICAgICAgdGhpcy51c2VyTW9kZWwgPSBVc2VyTW9kZWw7XG4gICAgICAgIHRoaXMubm90aWZpY2F0aW9ucyA9IE5vdGlmaWNhdGlvbnM7XG4gICAgICAgIHRoaXMuX3N1cGVyKCRzY29wZSk7XG5cbiAgICAgICAgdGhpcy5nZXRXYWxscygpO1xuICAgIH0sXG5cbiAgICBkZWZpbmVMaXN0ZW5lcnM6IGZ1bmN0aW9uKCl7XG4gICAgICAgIHRoaXMubm90aWZpY2F0aW9ucy5hZGRFdmVudExpc3RlbmVyKG1vZGVscy5ldmVudHMuVVNFUl9TSUdORURfSU4sIHRoaXMuaGFuZGxlVXNlckNoYW5nZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5ub3RpZmljYXRpb25zLmFkZEV2ZW50TGlzdGVuZXIobW9kZWxzLmV2ZW50cy5VU0VSX1NJR05FRF9PVVQsIHRoaXMuaGFuZGxlVXNlckNoYW5nZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5ub3RpZmljYXRpb25zLmFkZEV2ZW50TGlzdGVuZXIobW9kZWxzLmV2ZW50cy5XQUxMU19MT0FERUQsIHRoaXMuaGFuZGxlV2FsbHNDaGFuZ2UuYmluZCh0aGlzKSk7XG4gICAgfSxcblxuICAgIGRlZmluZVNjb3BlOiBmdW5jdGlvbigpe1xuICAgICAgICB0aGlzLiRzY29wZS53YWxscyA9IFtdO1xuICAgIH0sXG5cbiAgICBnZXRXYWxsczogZnVuY3Rpb24oKXtcbiAgICAgICAgdGhpcy53YWxsTW9kZWwuZ2V0V2FsbHNCeUd5bSh0aGlzLmd5bU1vZGVsLmd5bSk7XG4gICAgfSxcblxuICAgIC8qKiBFVkVOVCBIQU5ETEVSUyAqKi9cbiAgICBoYW5kbGVVc2VyQ2hhbmdlOiBmdW5jdGlvbigpe1xuICAgICAgICB0aGlzLiRzY29wZS5jdXJyZW50VXNlciA9IHRoaXMudXNlck1vZGVsLmN1cnJlbnRVc2VyO1xuICAgIH0sXG5cbiAgICBoYW5kbGVXYWxsc0NoYW5nZTogZnVuY3Rpb24oKXtcbiAgICAgICAgdGhpcy4kc2NvcGUud2FsbHMgPSB0aGlzLndhbGxNb2RlbC53YWxscztcbiAgICAgICAgY29uc29sZS5sb2codGhpcy4kc2NvcGUud2FsbHMpO1xuXG4gICAgfVxuXG59KTtcblxuYW5ndWxhci5tb2R1bGUoJ3dhbGxMaXN0JyxbXSlcbiAgICAuZGlyZWN0aXZlKCd3YWxsTGlzdCcsIGZ1bmN0aW9uKFdhbGxNb2RlbCwgR3ltTW9kZWwsIFVzZXJNb2RlbCwgTm90aWZpY2F0aW9ucyl7XG5cdHJldHVybiB7XG5cdCAgICByZXN0cmljdDonRScsXG5cdCAgICBpc29sYXRlOnRydWUsXG5cdCAgICBsaW5rOiBmdW5jdGlvbigkc2NvcGUpe1xuXHRcdG5ldyBXYWxsTGlzdERpcmVjdGl2ZSgkc2NvcGUsIFdhbGxNb2RlbCwgR3ltTW9kZWwsIFVzZXJNb2RlbCwgTm90aWZpY2F0aW9ucyk7XG5cdCAgICB9LFxuXHQgICAgc2NvcGU6dHJ1ZSxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInBhcnRpYWxzL3dhbGxzL3dhbGxMaXN0Lmh0bWxcIlxuXHR9O1xuICAgIH0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgV2FsbExpc3RJdGVtRGlyZWN0aXZlID0gQmFzZURpcmVjdGl2ZS5leHRlbmQoe1xuICAgIHVzZXJNb2RlbDogbnVsbCxcbiAgICBub3RpZmljYXRpb25zOiBudWxsLFxuXG4gICAgaW5pdDogZnVuY3Rpb24oJHNjb3BlLCBXYWxsTW9kZWwsIEd5bU1vZGVsLCBVc2VyTW9kZWwsIE5vdGlmaWNhdGlvbnMpe1xuICAgICAgICB0aGlzLndhbGxNb2RlbCA9IFdhbGxNb2RlbDtcbiAgICAgICAgdGhpcy5neW1Nb2RlbCA9IEd5bU1vZGVsO1xuICAgICAgICB0aGlzLnVzZXJNb2RlbCA9IFVzZXJNb2RlbDtcbiAgICAgICAgdGhpcy5ub3RpZmljYXRpb25zID0gTm90aWZpY2F0aW9ucztcbiAgICAgICAgdGhpcy5fc3VwZXIoJHNjb3BlKTtcbiAgICB9LFxuXG4gICAgZGVmaW5lTGlzdGVuZXJzOiBmdW5jdGlvbigpe1xuICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbnMuYWRkRXZlbnRMaXN0ZW5lcihtb2RlbHMuZXZlbnRzLlVTRVJfU0lHTkVEX0lOLCB0aGlzLmhhbmRsZVVzZXJDaGFuZ2UuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMubm90aWZpY2F0aW9ucy5hZGRFdmVudExpc3RlbmVyKG1vZGVscy5ldmVudHMuVVNFUl9TSUdORURfT1VULCB0aGlzLmhhbmRsZVVzZXJDaGFuZ2UuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMubm90aWZpY2F0aW9ucy5hZGRFdmVudExpc3RlbmVyKG1vZGVscy5ldmVudHMuV0FMTFNfTE9BREVELCB0aGlzLmhhbmRsZVdhbGxzQ2hhbmdlLmJpbmQodGhpcykpO1xuICAgIH0sXG5cbiAgICBkZWZpbmVTY29wZTogZnVuY3Rpb24oKXtcbiAgICAgICAgdGhpcy4kc2NvcGUud2FsbHMgPSBbXTtcbiAgICB9LFxuXG4gICAgZ2V0V2FsbHM6IGZ1bmN0aW9uKCl7XG4gICAgICAgIHRoaXMud2FsbE1vZGVsLmdldFdhbGxzQnlHeW0odGhpcy5neW1Nb2RlbC5neW0pO1xuICAgIH0sXG5cbiAgICAvKiogRVZFTlQgSEFORExFUlMgKiovXG4gICAgaGFuZGxlVXNlckNoYW5nZTogZnVuY3Rpb24oKXtcbiAgICAgICAgdGhpcy4kc2NvcGUuY3VycmVudFVzZXIgPSB0aGlzLnVzZXJNb2RlbC5jdXJyZW50VXNlcjtcbiAgICB9LFxuXG4gICAgaGFuZGxlV2FsbHNDaGFuZ2U6IGZ1bmN0aW9uKCl7XG4gICAgICAgIHRoaXMuJHNjb3BlLndhbGxzID0gdGhpcy53YWxsTW9kZWwud2FsbHM7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuJHNjb3BlLndhbGxzKTtcblxuICAgIH1cblxufSk7XG5cbmFuZ3VsYXIubW9kdWxlKCd3YWxsTGlzdEl0ZW0nLFtdKVxuICAgIC5kaXJlY3RpdmUoJ3dhbGxMaXN0SXRlbScsIGZ1bmN0aW9uKFdhbGxNb2RlbCwgR3ltTW9kZWwsIFVzZXJNb2RlbCwgTm90aWZpY2F0aW9ucyl7XG5cdHJldHVybiB7XG5cdCAgICByZXN0cmljdDonRScsXG5cdCAgICBpc29sYXRlOnRydWUsXG5cdCAgICBsaW5rOiBmdW5jdGlvbigkc2NvcGUpe1xuXHRcdG5ldyBXYWxsTGlzdEl0ZW1EaXJlY3RpdmUoJHNjb3BlLCBXYWxsTW9kZWwsIEd5bU1vZGVsLCBVc2VyTW9kZWwsIE5vdGlmaWNhdGlvbnMpO1xuXHQgICAgfSxcblx0ICAgIHNjb3BlOmZhbHNlLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwicGFydGlhbHMvd2FsbHMvd2FsbExpc3RJdGVtLmh0bWxcIlxuXHR9O1xuICAgIH0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgR3ltTWFwQ29udHJvbGxlciA9IEJhc2VDb250cm9sbGVyLmV4dGVuZCh7XG4gICAgbm90aWZpY2F0aW9uczpudWxsLFxuICAgIHJvb3RDYW52YXM6bnVsbCxcbiAgICByb290SW1hZ2U6bnVsbCxcblxuICAgIGluaXQ6ZnVuY3Rpb24oJHNjb3BlLCBOb3RpZmljYXRpb25zKXtcblx0ICAgdGhpcy5ub3RpZmljYXRpb25zID0gTm90aWZpY2F0aW9ucztcblx0ICAgdGhpcy5fc3VwZXIoJHNjb3BlKTtcbiAgICB9LFxuXG4gICAgZGVmaW5lTGlzdGVuZXJzOmZ1bmN0aW9uKCl7XG4gICAgICAgIHRoaXMuX3N1cGVyKCk7XG4gICAgICAgIHRoaXMuJHNjb3BlLmFyZWFDbGlja2VkID0gdGhpcy5hcmVhQ2xpY2tlZC5iaW5kKHRoaXMpO1xuICAgICAgICB3aW5kb3cub25yZXNpemUgPSB0aGlzLm9uUmVzaXplLmJpbmQodGhpcyk7XG4gICAgfSxcblxuICAgIGRlZmluZVNjb3BlOmZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGF0LnJvb3RJbWFnZSA9ICQoJy5pbWFnZUxheWVyIGltZycpLm9uKCdsb2FkLm9tZ21hcHMnLCBmdW5jdGlvbihldmVudCl7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yd2RJbWFnZU1hcHMoKTtcbiAgICAgICAgICAgICAgICB0aGF0LmhpZ2hsaWdodE1hcCgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSkuY3NzKCdvcGFjaXR5JywnMCcpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImRvbmVcIik7XG4gICAgICAgICAgICBcbiAgICAgICAgfSk7XG5cbiAgICAgICAgXG4gICAgfSxcblxuICAgIGRlc3Ryb3k6ZnVuY3Rpb24oKXtcbiAgICAgICAgJCgnYXJlYScpLm9mZignLm9tZ21hcHMnKTtcbiAgICAgICAgJCgnaW1nJykub2ZmKCcub21nbWFwcycpO1xuICAgIH0sXG5cblxuICAgIGFyZWFDbGlja2VkOiBmdW5jdGlvbigpe1xuICAgICAgICBjb25zb2xlLmxvZyhcIlJDSFwiKTtcbiAgICB9LFxuICAgIFxuICAgIGNyZWF0ZVJvb3RDYW52YXM6ZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGltYWdlID0gdGhpcy5yb290SW1hZ2UsXG4gICAgICAgICAgICBpbWdXaWR0aCA9IGltYWdlLndpZHRoKCksXG4gICAgICAgICAgICBpbWdIZWlnaHQgPSBpbWFnZS5oZWlnaHQoKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMucm9vdENhbnZhcyA9ICQoJzxjYW52YXM+JykuYXR0cignd2lkdGgnLGltZ1dpZHRoKS5hdHRyKCdoZWlnaHQnLGltZ0hlaWdodCk7XG4gICAgICAgIHRoaXMucm9vdENhbnZhcy5jc3Moe1xuICAgICAgICAgICAgcG9zaXRpb246J2Fic29sdXRlJyxcbiAgICAgICAgICAgIHRvcDonMHB4JyxcbiAgICAgICAgICAgIGxlZnQ6JzBweCcsXG4gICAgICAgICAgICBoZWlnaHQ6J2F1dG8nXG4gICAgICAgIH0pO1xuICAgICAgICBpbWFnZS5iZWZvcmUodGhpcy5yb290Q2FudmFzKTtcbiAgICAgICAgdmFyIGN0eCA9IHRoaXMucm9vdENhbnZhcy5nZXQoMCkuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgY3R4LmRyYXdJbWFnZShpbWFnZS5nZXQoMCksMCwwLGltZ1dpZHRoLCBpbWdIZWlnaHQpO1xuICAgIH0sXG4gICAgXG4gICAgcmVkcmF3Um9vdENhbnZhczogZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGltYWdlID0gdGhpcy5yb290SW1hZ2UsXG4gICAgICAgICAgICBpbWdXaWR0aCA9IGltYWdlLndpZHRoKCksXG4gICAgICAgICAgICBpbWdIZWlnaHQgPSBpbWFnZS5oZWlnaHQoKTtcbiAgICAgICAgXG4gICAgICAgIHZhciBjdHggPSB0aGlzLnJvb3RDYW52YXMuZ2V0KDApLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5yb290Q2FudmFzLmdldCgwKS53aWR0aCwgdGhpcy5yb290Q2FudmFzLmdldCgwKS53aWR0aCk7XG5cbiAgICAgICAgdGhpcy5yb290Q2FudmFzLmF0dHIoJ3dpZHRoJyxpbWdXaWR0aCkuYXR0cignaGVpZ2h0JyxpbWdIZWlnaHQpO1xuXG4gICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1hZ2UuZ2V0KDApLDAsMCxpbWFnZS53aWR0aCgpLCBpbWFnZS5oZWlnaHQoKSk7XG4gICAgfSxcblxuICAgIGhpZ2hsaWdodE1hcDogZnVuY3Rpb24oKXtcbiAgICAgICAgXG4gICAgICAgIHZhciBib2R5ID0gJCgnYm9keScpLFxuICAgICAgICAgICAgY29udGVudEFyZWEgPSAkKCcubWFwQ29udGVudCcpLFxuICAgICAgICAgICAgbWFwID0gJChcIiNneW1NYXBcIiksXG4gICAgICAgICAgICBtYXBFbCA9ICQoXCIjZ3ltTWFwXCIpLmdldCgwKSxcbiAgICAgICAgICAgIG1hcEFyZWFzID0gbWFwLmZpbmQoJ2FyZWEnKSxcbiAgICAgICAgICAgIGltYWdlID0gdGhpcy5yb290SW1hZ2UsXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGdldCB0aGUgd2lkdGggYW5kIGhlaWdodCBmcm9tIHRoZSBpbWFnZSB0YWdcbiAgICAgICAgICAgIGltZ1dpZHRoID0gaW1hZ2Uud2lkdGgoKSxcbiAgICAgICAgICAgIGltZ0hlaWdodCA9IGltYWdlLmhlaWdodCgpLFxuICAgICAgICAgICAgaW1nQXR0cldpZHRoID0gaW1hZ2UuYXR0cignd2lkdGgnKSxcbiAgICAgICAgICAgIGltZ0F0dHJIZWlnaHQgPSBpbWFnZS5hdHRyKCdoZWlnaHQnKSxcbiAgICAgICAgICAgIHhGYWN0b3IgPSBwYXJzZUZsb2F0KGltZ1dpZHRoL2ltZ0F0dHJXaWR0aCksXG4gICAgICAgICAgICB5RmFjdG9yID0gcGFyc2VGbG9hdChpbWdIZWlnaHQvaW1nQXR0ckhlaWdodCk7XG5cbi8vICAgICAgICBjb25zb2xlLmxvZygnaW1nQXR0cldpZHRoOiAnK2ltZ0F0dHJXaWR0aCk7XG4vLyAgICAgICAgY29uc29sZS5sb2coJ2ltZ0F0dHJIZWlnaHQ6ICcraW1nQXR0ckhlaWdodCk7XG4vLyAgICAgICAgY29uc29sZS5sb2coJ3hGYWN0b3I6ICcreEZhY3Rvcik7XG4vLyAgICAgICAgY29uc29sZS5sb2coJ3lGYWN0b3I6ICcreUZhY3Rvcik7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdmFyIHJvb3RDYW52YXMgPSB0aGlzLmNyZWF0ZVJvb3RDYW52YXMoKTtcbiAgICAgICAgXG4gICAgICAgICQuZWFjaChtYXBBcmVhcywgZnVuY3Rpb24oaW5kZXgsIGFyZWEpe1xuICAgICAgICAgICAgdmFyIGFyZWEgPSAkKGFyZWEpO1xuICAgICAgICAgICAgdmFyIGFyZWFFbCA9IGFyZWEuZ2V0KDApO1xuICAgICAgICAgICAgdmFyIGNvb3JkcyA9IGFyZWFFbC5jb29yZHMuc3BsaXQoXCIsIFwiKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gbWFwIHRoZSBjb29yZHMgYmVjYXVzZSB0aGV5IGFyZSBzY2FsZWQgZm9yIHRoZSBpbWFnZSBzaXplIGFuZCBub3QgdGhlIG90aGVyIHNpemVcbiAgICAgICAgICAgIGNvb3JkcyA9IGNvb3Jkcy5tYXAoZnVuY3Rpb24odmFsdWUsIGluZGV4KXtcbiAgICAgICAgICAgICAgICBpZihpbmRleCUyID09PSAwKXtcbiAgICAgICAgICAgICAgICAgICAgLy8geCBjb29yZFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgKiB4RmFjdG9yO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHkgY29vcmRcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlICogeUZhY3RvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gY3JlYXRlIGEgY2FudmFzXG4gICAgICAgICAgICB2YXIgY2FudmFzID0gJCgnPGNhbnZhcz4nKS5hdHRyKCd3aWR0aCcsaW1nV2lkdGgpLmF0dHIoJ2hlaWdodCcsaW1nSGVpZ2h0KS5hZGRDbGFzcygnbWFwLW92ZXJsYXknKTtcbiAgICAgICAgICAgIGNhbnZhcy5jc3Moe1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOidhYnNvbHV0ZScsXG4gICAgICAgICAgICAgICAgdG9wOicwcHgnLFxuICAgICAgICAgICAgICAgIGxlZnQ6JzBweCcsXG4gICAgICAgICAgICAgICAgb3BhY2l0eTonMC4wJyxcbiAgICAgICAgICAgICAgICBkaXNwbGF5Oidub25lJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGF0dGFjaCBzYWlkIGNhbnZhcyB0byBET01cbiAgICAgICAgICAgIGNvbnRlbnRBcmVhLmZpbmQoJ2ltZycpLmJlZm9yZShjYW52YXMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBncmFiIHRoZSBjYW52YXMgY29udGV4dFxuICAgICAgICAgICAgdmFyIGN0eCA9IGNhbnZhcy5nZXQoMCkuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2YwMCc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciB4ID0gY29vcmRzWzBdLFxuICAgICAgICAgICAgICAgIHkgPSBjb29yZHNbMV07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIGN0eC5tb3ZlVG8oeCwgeSk7XG4gICAgICAgICAgICBmb3IodmFyIGogPSAyLGxlbiA9IGNvb3Jkcy5sZW5ndGg7IGogPCBsZW4tMSA7IGogKz0gMiApe1xuICAgICAgICAgICAgICAgIHggPSBjb29yZHNbal07XG4gICAgICAgICAgICAgICAgeSA9IGNvb3Jkc1tqICsgMV07XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY3R4LmxpbmVUbyh4LCB5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgICAgIGN0eC5maWxsKCk7XG5cbiAgICAgICAgICAgIC8vIGNyZWF0ZSBhbiBhcmVhIG1vdXNlZW50ZXIgZXZlbnQgbGlzdGVuZXJcbiAgICAgICAgICAgIGFyZWEub24oJ21vdXNlZW50ZXIub21nbWFwcycsIChmdW5jdGlvbihjYW52YXMpe1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihldmVudCl7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4vLyAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ21vdXNlIGVudGVyJyk7XG4gICAgICAgICAgICAgICAgICAgIGNhbnZhcy5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcbiAgICAgICAgICAgICAgICAgICAgY2FudmFzLmFuaW1hdGUoe29wYWNpdHk6JzEuMCd9LDIwMCwnbGluZWFyJyk7XG4vLyAgICAgICAgICAgICAgICAgICAgY2FudmFzLmFuaW1hdGUoe2Rpc3BsYXk6J2Jsb2NrJ30sMjAwLCdsaW5lYXInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KShjYW52YXMpKTtcblxuICAgICAgICAgICAgYXJlYS5vbignbW91c2VsZWF2ZS5vbWdtYXBzJywgKGZ1bmN0aW9uKGNhbnZhcyl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGV2ZW50KXtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbi8vICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbW91c2UgbGVhdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgY2FudmFzLmFuaW1hdGUoe29wYWNpdHk6JzAuMCd9LDIwMCwnbGluZWFyJyxmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLmNzcygnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuLy8gICAgICAgICAgICAgICAgICAgIGNhbnZhcy5hbmltYXRlKHtkaXNwbGF5Oidub25lJ30sMjAwLCdsaW5lYXInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KShjYW52YXMpKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYXJlYS5vbignY2xpY2sub21nbWFwcycsIChmdW5jdGlvbihjYW52YXMpe1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihldmVudCl7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjbGljaycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKGNhbnZhcykpO1xuXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICB9LFxuXG4gICAgb25SZXNpemU6IGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcblxuICAgICAgICBpZih0aGlzLnJlc2l6ZVRpbWVvdXQpe1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmVzaXplVGltZW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXNpemVUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgdGhhdC5yZXNpemUoKTtcbiAgICAgICAgfSwgMjAwKTtcbiAgICB9LFxuICAgIFxuICAgIHJlc2l6ZTogZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICBjb25zb2xlLmxvZygncmVzaXplJyk7XG4gICAgICAgIFxuICAgICAgICBpZih0aGlzLnJvb3RDYW52YXMpe1xuICAgICAgICAgICAgdGhpcy5yZWRyYXdSb290Q2FudmFzKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICQoJ2NhbnZhcy5tYXAtb3ZlcmxheScpLmVhY2goZnVuY3Rpb24oaW5kZXgsIGNhbnZhcyl7XG4gICAgICAgICAgICBjYW52YXMgPSAkKGNhbnZhcyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbnZhcy5jc3Moe1xuICAgICAgICAgICAgICAgIGhlaWdodDogdGhhdC5yb290SW1hZ2UuaGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgd2lkdGg6IHRoYXQucm9vdEltYWdlLndpZHRoKClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgIH1cblxufSk7XG5cblxuR3ltTWFwQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCdOb3RpZmljYXRpb25zJ107XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBSb3V0ZUxpc3REaXJlY3RpdmUgPSBCYXNlRGlyZWN0aXZlLmV4dGVuZCh7XG4gICAgdXNlck1vZGVsOiBudWxsLFxuICAgIG5vdGlmaWNhdGlvbnM6IG51bGwsXG5cbiAgICBpbml0OiBmdW5jdGlvbigkc2NvcGUsIFVzZXJNb2RlbCwgTm90aWZpY2F0aW9ucyl7XG4gICAgICAgIHRoaXMudXNlck1vZGVsID0gVXNlck1vZGVsO1xuICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbnMgPSBOb3RpZmljYXRpb25zO1xuICAgICAgICB0aGlzLl9zdXBlcigkc2NvcGUpO1xuICAgIH0sXG5cbiAgICBkZWZpbmVMaXN0ZW5lcnM6IGZ1bmN0aW9uKCl7XG4gICAgICAgIHRoaXMubm90aWZpY2F0aW9ucy5hZGRFdmVudExpc3RlbmVyKG1vZGVscy5ldmVudHMuVVNFUl9TSUdORURfSU4sIHRoaXMuaGFuZGxlVXNlclNpZ25lZEluLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLiRzY29wZS5sb2dvdXQgPSB0aGlzLmxvZ291dC5iaW5kKHRoaXMpO1xuICAgIH0sXG5cbiAgICBkZWZpbmVTY29wZTogZnVuY3Rpb24oKXtcbiAgICAgICAgY29uc29sZS5sb2coXCJyb3V0ZUxpc3REaXJlY3RpdmVcIik7XG4gICAgICAgIHRoaXMuJHNjb3BlLnJvdXRlcyA9IFtdO1xuXG4gICAgICAgIHZhciByb3V0ZSA9IHtcbiAgICAgICAgICAgIGdyYWRlOiA1LFxuICAgICAgICAgICAgY29sb3I6IFwiYmx1ZVwiXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy4kc2NvcGUucm91dGVzLnB1c2gocm91dGUpO1xuXG4gICAgICAgIHJvdXRlID0ge1xuICAgICAgICAgICAgZ3JhZGU6IDYsXG4gICAgICAgICAgICBjb2xvcjogXCJvcmFuZ2VcIlxuICAgICAgICB9O1xuICAgICAgICB0aGlzLiRzY29wZS5yb3V0ZXMucHVzaChyb3V0ZSk7XG5cbiAgICAgICAgcm91dGUgPSB7XG4gICAgICAgICAgICBncmFkZTogNyxcbiAgICAgICAgICAgIGNvbG9yOiBcInB1cnBsZVwiXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuJHNjb3BlLnJvdXRlcy5wdXNoKHJvdXRlKTtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy4kc2NvcGUucm91dGVzKTtcblxuICAgIH0sXG5cbiAgICBsb2dvdXQ6IGZ1bmN0aW9uKCl7XG4gICAgICAgIHRoaXMudXNlck1vZGVsLmxvZ291dCgpO1xuICAgICAgICB0aGlzLiRsb2NhdGlvbi51cmwoXCIvXCIpO1xuICAgIH0sXG5cbiAgICAvKiogRVZFTlQgSEFORExFUlMgKiovXG4gICAgaGFuZGxlVXNlclNpZ25lZEluOiBmdW5jdGlvbigpe1xuICAgICAgICB0aGlzLiRzY29wZS5jdXJyZW50VXNlciA9IHRoaXMudXNlck1vZGVsLmN1cnJlbnRVc2VyO1xuICAgIH1cblxufSk7XG5cbmFuZ3VsYXIubW9kdWxlKCdyb3V0ZUxpc3QnLFtdKVxuICAgIC5kaXJlY3RpdmUoJ3JvdXRlTGlzdCcsIGZ1bmN0aW9uKFVzZXJNb2RlbCwgTm90aWZpY2F0aW9ucyl7XG5cdHJldHVybiB7XG5cdCAgICByZXN0cmljdDonRScsXG5cdCAgICBpc29sYXRlOnRydWUsXG5cdCAgICBsaW5rOiBmdW5jdGlvbigkc2NvcGUpe1xuXHRcdG5ldyBSb3V0ZUxpc3REaXJlY3RpdmUoJHNjb3BlLCBVc2VyTW9kZWwsIE5vdGlmaWNhdGlvbnMpO1xuXHQgICAgfSxcblx0ICAgIHNjb3BlOnRydWUsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJwYXJ0aWFscy9yb3V0ZXMvcm91dGVMaXN0Lmh0bWxcIlxuXHR9O1xuICAgIH0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgUm91dGVMaXN0SXRlbURpcmVjdGl2ZSA9IEJhc2VEaXJlY3RpdmUuZXh0ZW5kKHtcbiAgICB1c2VyTW9kZWw6IG51bGwsXG4gICAgbm90aWZpY2F0aW9uczogbnVsbCxcblxuICAgIGluaXQ6IGZ1bmN0aW9uKCRzY29wZSwgVXNlck1vZGVsLCBOb3RpZmljYXRpb25zKXtcbiAgICAgICAgdGhpcy51c2VyTW9kZWwgPSBVc2VyTW9kZWw7XG4gICAgICAgIHRoaXMubm90aWZpY2F0aW9ucyA9IE5vdGlmaWNhdGlvbnM7XG4gICAgICAgIHRoaXMuX3N1cGVyKCRzY29wZSk7XG4gICAgfSxcblxuICAgIGRlZmluZUxpc3RlbmVyczogZnVuY3Rpb24oKXtcbiAgICAgICAgdGhpcy5ub3RpZmljYXRpb25zLmFkZEV2ZW50TGlzdGVuZXIobW9kZWxzLmV2ZW50cy5VU0VSX1NJR05FRF9JTiwgdGhpcy5oYW5kbGVVc2VyU2lnbmVkSW4uYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuJHNjb3BlLmxvZ291dCA9IHRoaXMubG9nb3V0LmJpbmQodGhpcyk7XG4gICAgfSxcblxuICAgIGRlZmluZVNjb3BlOiBmdW5jdGlvbigpe1xuICAgICAgICB0aGlzLm5hdlNob3dpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy4kc2NvcGUuY3VycmVudFVzZXIgPSB0aGlzLnVzZXJNb2RlbC5jdXJyZW50VXNlcjtcbiAgICB9LFxuXG4gICAgbG9nb3V0OiBmdW5jdGlvbigpe1xuICAgICAgICB0aGlzLnVzZXJNb2RlbC5sb2dvdXQoKTtcbiAgICAgICAgdGhpcy4kbG9jYXRpb24udXJsKFwiL1wiKTtcbiAgICB9LFxuXG4gICAgLyoqIEVWRU5UIEhBTkRMRVJTICoqL1xuICAgIGhhbmRsZVVzZXJTaWduZWRJbjogZnVuY3Rpb24oKXtcbiAgICAgICAgdGhpcy4kc2NvcGUuY3VycmVudFVzZXIgPSB0aGlzLnVzZXJNb2RlbC5jdXJyZW50VXNlcjtcbiAgICB9XG5cbn0pO1xuXG5hbmd1bGFyLm1vZHVsZSgncm91dGVMaXN0SXRlbScsW10pXG4gICAgLmRpcmVjdGl2ZSgncm91dGVMaXN0SXRlbScsIGZ1bmN0aW9uKFVzZXJNb2RlbCwgTm90aWZpY2F0aW9ucyl7XG5cdHJldHVybiB7XG5cdCAgICByZXN0cmljdDonRScsXG5cdCAgICBpc29sYXRlOnRydWUsXG5cdCAgICBsaW5rOiBmdW5jdGlvbigkc2NvcGUpe1xuXHRcdG5ldyBSb3V0ZUxpc3RJdGVtRGlyZWN0aXZlKCRzY29wZSwgVXNlck1vZGVsLCBOb3RpZmljYXRpb25zKTtcblx0ICAgIH0sXG5cdCAgICBzY29wZTp0cnVlLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwicGFydGlhbHMvcm91dGVzL3JvdXRlTGlzdEl0ZW0uaHRtbFwiXG5cdH07XG4gICAgfSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=